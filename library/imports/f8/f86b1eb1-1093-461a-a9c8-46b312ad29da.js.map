{"version":3,"sources":["assets\\scripts\\section_init.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Player } from \"./player\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class Section extends cc.Component {\r\n\r\n    private base: number = 6;\r\n    private strip: number = 1;\r\n    private player_col: number = 0;\r\n\r\n    @property(cc.Prefab)\r\n    searchlight: cc.Prefab = null;\r\n\r\n    @property(cc.Prefab)\r\n    sharp: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sharp_down: cc.Prefab = null;\r\n\r\n    @property(cc.Prefab)\r\n    spider: cc.Prefab = null;\r\n\r\n    @property(cc.Prefab)\r\n    coin_pre: cc.Prefab = null;\r\n\r\n    @property(cc.Prefab)\r\n    lego_pre: cc.Prefab=null;\r\n\r\n    @property(cc.Prefab)\r\n    bubble_pre: cc.Prefab=null;\r\n\r\n    @property(cc.Prefab)\r\n    banana_pre: cc.Prefab=null;\r\n    @property(cc.Prefab)\r\n    data_pre: cc.Prefab=null;\r\n    @property(cc.Prefab)\r\n    signal_pre: cc.Prefab=null;\r\n    @property(cc.Prefab)\r\n    mute_pre: cc.Prefab=null;\r\n\r\n    private lv: number = 0;\r\n\r\n    onLoad () {\r\n        cc.director.getCollisionManager().enabled = true;\r\n        cc.director.getCollisionManager().enabledDrawBoundingBox = true;\r\n        cc.director.getPhysicsManager().enabled = true;\r\n        // cc.director.getPhysicsManager().debugDrawFlags = 1;\r\n        cc.director.getPhysicsManager().gravity = cc.v2(0, -500);\r\n        this.lv = parseInt(this.node.name.replace('section', ''));\r\n    }\r\n    onDestroy () {\r\n        cc.director.getCollisionManager().enabled = false;\r\n        cc.director.getCollisionManager().enabledDebugDraw = false;\r\n        cc.director.getCollisionManager().enabledDrawBoundingBox = false;\r\n    }\r\n\r\n    start(){\r\n        this.node.anchorX = 0;\r\n        this.node.anchorY = 0;\r\n        var map = this.node.getComponent(cc.TiledMap);\r\n        this.strip = cc.find('Canvas/root').getComponent('root').color_strip;         //每次更新的section 色票都要一樣\r\n        this.base = 1 + 6*this.strip;\r\n\r\n        //console.log(\"base color gid: \" + this.base);\r\n\r\n        var body = this.node.addComponent(cc.RigidBody);\r\n        body.type = cc.RigidBodyType.Static;\r\n        body.fixedRotation = true;\r\n        var collider = this.node.addComponent(cc.PhysicsBoxCollider);\r\n        collider.offset = cc.v2(960, 240);\r\n        collider.size = cc.size(5, 1000);\r\n        collider.sensor = true;\r\n        collider.tag = 1000;        // init next map on contact\r\n        collider.apply();\r\n\r\n        var sz = map.getTileSize();\r\n        // console.log(sz);\r\n\r\n\r\n        \r\n\r\n        var floor = map.getLayer(\"ground\");\r\n        var layerSz = floor.getLayerSize();\r\n        for(var i = 0; i < layerSz.width; i++){\r\n            for(var j = 0; j < layerSz.height; j++){\r\n                var FloorTile = floor.getTiledTileAt(i, j, true);\r\n                if(FloorTile.gid == 1){\r\n                    FloorTile.gid = this.base;\r\n                    // console.log(\"draw ground box for tile (\" + i + \", \" + j + \")\");\r\n                    FloorTile.node.group = \"ground\";\r\n                    // console.log(\"created tile with \" + FloorTile.node.group)\r\n                    var body = FloorTile.node.addComponent(cc.RigidBody);\r\n                    body.type = cc.RigidBodyType.Static;\r\n                    body.fixedRotation = true;\r\n\r\n                    var collider = FloorTile.node.addComponent(cc.PhysicsBoxCollider);\r\n                    collider.offset = cc.v2(sz.width/2, sz.height/2);\r\n                    if(floor.getTiledTileAt(i, j-1, true).gid) collider.size = cc.size(47.6, 48);\r\n                    else collider.size = sz;\r\n                    collider.apply();\r\n                }\r\n            }\r\n        }\r\n        // // console.log(\"tile init complete, marking mounds\")\r\n        // for(j = 7; j >= 0; j--){\r\n        //     var FloorTile = floor.getTiledTileAt(layerSz.width-1, j, true);\r\n        //     if(FloorTile.gid) FloorTile.node.group = \"mound\";\r\n        // }\r\n        // for(var i = 1; i < layerSz.width-1; i++){\r\n        //     for(var j = 0; j < layerSz.height -1; j++){\r\n        //         var FloorTile = floor.getTiledTileAt(i, j, true);\r\n        //         if(FloorTile.gid != 0 && ((floor.getTiledTileAt(i+1, j, true).gid == 0) || (floor.getTiledTileAt(i-1, j, true).gid == 0))){\r\n        //             FloorTile.node.group = \"mound\";\r\n        //             // console.log(\"shrink collider size of tile(\" + 39 + \", \" + 7 + \") to \"+ col.size.width + \", \"+ col.size.height);\r\n        //         }\r\n        //     }\r\n        // }\r\n        // for(j = 8; j > 2; j--){\r\n        //     var FloorTile = floor.getTiledTileAt(layerSz.width-1, j, true);\r\n        //     if(FloorTile.gid){\r\n        //         if(floor.getTiledTileAt(layerSz.width-1, j-1, true)) FloorTile.node.group = \"mound\";\r\n        //         else FloorTile.node.group = \"mound_top\";\r\n                \r\n        //         // console.log(\"shrink collider size of tile(\" + 39 + \", \" + 7 + \") to \"+ col.size.width + \", \"+ col.size.height);\r\n        //     }\r\n        // }\r\n        // for(var i = 1; i < layerSz.width-1; i++){\r\n        //     for(var j = 0; j < layerSz.height -1; j++){\r\n        //         var FloorTile = floor.getTiledTileAt(i, j, true);\r\n        //         if(FloorTile.gid != 0 && ((floor.getTiledTileAt(i+1, j, true).gid == 0) || (floor.getTiledTileAt(i-1, j, true).gid == 0))){\r\n        //             /*if((floor.getTiledTileAt(i+1, j, true).gid == 0 && floor.getTiledTileAt(i+1, j+1, true).gid != 0) || (floor.getTiledTileAt(i-1, j, true).gid == 0 && floor.getTiledTileAt(i-1, j+1, true).gid != 0))*/\r\n        //             if(floor.getTiledTileAt(i, j-1, true).gid) FloorTile.node.group = \"mound\";\r\n        //             else FloorTile.node.group = \"mound_top\";\r\n                    \r\n        //             // console.log(\"shrink collider size of tile(\" + 39 + \", \" + 7 + \") to \"+ col.size.width + \", \"+ col.size.height);\r\n        //         }\r\n        //     }\r\n        // }\r\n        var FloorTile = floor.getTiledTileAt(layerSz.width-1, 7, true);\r\n        if(FloorTile.gid){\r\n            FloorTile.node.group = \"mound\";\r\n            // console.log(\"shrink collider size of tile(\" + 39 + \", \" + 7 + \") to \"+ col.size.width + \", \"+ col.size.height);\r\n        }\r\n        // }\r\n        for(var i = 1; i < layerSz.width-1; i++){\r\n            for(var j = 0; j < layerSz.height -1; j++){\r\n                var FloorTile = floor.getTiledTileAt(i, j, true);\r\n                if(FloorTile.gid != 0 && ((floor.getTiledTileAt(i+1, j, true).gid == 0 && floor.getTiledTileAt(i+1, j+1, true).gid != 0) || (floor.getTiledTileAt(i-1, j, true).gid == 0 && floor.getTiledTileAt(i-1, j+1, true).gid != 0))){\r\n                    FloorTile.node.group = \"mound\";\r\n                    // console.log(\"shrink collider size of tile(\" + 39 + \", \" + 7 + \") to \"+ col.size.width + \", \"+ col.size.height);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n        var obj_list = map.getObjectGroup(\"colors\").getObjects();\r\n        if(cc.director.getScene().name ==\"test\" || cc.director.getScene().name ==\"multi\")this.player_col = 6*this.strip + cc.find('Canvas/root/player').getComponent(((cc.director.getScene().name == 'multi')? 'player_multi' : 'player')).color\r\n        else if(cc.director.getScene().name ==\"day\")this.player_col = 6*this.strip + cc.find('Canvas/root/player').getComponent('player_day').color;\r\n        //console.log(\"bias towards \" + this.player_col);\r\n        obj_list.forEach((obj) => {\r\n            var x_size = obj.width / 48;\r\n            var y_size = obj.height / 48;\r\n            \r\n            var cannot_hide = Math.floor(Math.random() * 2);\r\n            var col = 0;\r\n            if(cannot_hide) col = this.base + Math.floor(Math.random() * 5);\r\n            else col = this.player_col;\r\n            // console.log(obj.x, obj.y, x_size, y_size);\r\n            // console.log(\"Create colored block with gid \" + this.base + color);\r\n\r\n            for(i = obj.x / 48; i < (obj.x / 48 + x_size); i++){\r\n                for(j = 10 - (obj.y/48); j < (10 - (obj.y/48) + y_size); j++){\r\n                    var FloorTile = floor.getTiledTileAt(i, j, true);\r\n                    FloorTile.gid = col;\r\n                }\r\n            }\r\n        });\r\n\r\n        // sharp obstacle、spider、sharp_down\r\n        var section_count;\r\n        if(cc.director.getScene().name ==\"test\" || cc.director.getScene().name ==\"multi\") section_count = cc.find('Canvas/root/player').getComponent(((cc.director.getScene().name == 'multi')? 'player_multi' : 'player')).section_count;\r\n        else if(cc.director.getScene().name ==\"day\") section_count = cc.find('Canvas/root/player').getComponent('player_day').section_count;\r\n        \r\n        var sharp_list = {1: 'sharp', 2: 'sharp2', 3: 'sharp3', 4: 'sharp4'};\r\n        var sharp_d_list = {1: 'sharp_d', 2: 'sharp_d2', 3: 'sharp_d3'};\r\n        var map_layer = map.getLayer(\"enemy\");\r\n        var layer_size = map_layer.getLayerSize();\r\n        var flag = new Array(layer_size.width);\r\n        for( var i = 0; i < layer_size.width; i++) {\r\n            flag[i] = new Array(layer_size.height);\r\n        }\r\n        var flag_d = new Array(layer_size.width);\r\n        for( var i = 0; i < layer_size.width; i++) {\r\n            flag_d[i] = new Array(layer_size.height);\r\n        }\r\n        for(var i = 0; i < layer_size.width; i++){\r\n            for(var j = 0; j < layer_size.height; j++){\r\n                var tile = map_layer.getTiledTileAt(i, j, true);\r\n\r\n                //1 static, 234 moving\r\n                if(tile.gid == 878 + 61 && flag[i][j] == null){\r\n                    flag[i][j] = 1;\r\n                    var rad = 1 + Math.floor(Math.random() * 4);  //1 static, 234 moving\r\n                    \r\n                    var sharp_pre = cc.instantiate(this.sharp);\r\n                    sharp_pre.name = sharp_list[rad];\r\n                    sharp_pre.x = section_count * 1920 + tile.node.x;\r\n                    sharp_pre.y = tile.node.y;\r\n                    cc.find(\"Canvas/root/mapworld/sharp\").addChild(sharp_pre);\r\n                    for(var m = i + 1; ; m++) {\r\n                        var tile_ = map_layer.getTiledTileAt(m, j, true);\r\n                        if(tile_.gid != 878 + 61) break;\r\n                        flag[m][j] = 1;\r\n                        var sharp_p = cc.instantiate(this.sharp);\r\n                        sharp_p.name = sharp_list[rad];\r\n                        sharp_p.x = section_count * 1920 + tile_.node.x;\r\n                        sharp_p.y = tile_.node.y;\r\n                        cc.find(\"Canvas/root/mapworld/sharp\").addChild(sharp_p);\r\n                    }\r\n                //spider\r\n                } else if(tile.gid == 265 + 61){     \r\n                    var spider_pre = cc.instantiate(this.spider);\r\n                    spider_pre.x = section_count * 1920 + tile.node.x;\r\n                    spider_pre.y = tile.node.y;\r\n                    cc.find(\"Canvas/root/mapworld\").addChild(spider_pre);\r\n\r\n                //sharp fall down\r\n                } else if(tile.gid == 664 + 61 && flag_d[i][j] == null){      \r\n                    flag_d[i][j] = 1;\r\n                    var rad = 1 + Math.floor(Math.random() * 3);  \r\n                    \r\n                    var sharp_d = cc.instantiate(this.sharp_down);\r\n                    sharp_d.name = sharp_d_list[rad];\r\n                    sharp_d.x = section_count * 1920 + tile.node.x;\r\n                    sharp_d.y = tile.node.y;\r\n                    cc.find(\"Canvas/root/mapworld/sharp_down\").addChild(sharp_d);\r\n                    for(var m = i + 1; ; m++) {\r\n                        var tile_ = map_layer.getTiledTileAt(m, j, true);\r\n                        if(tile_.gid != 664 + 61) break;\r\n                        flag_d[m][j] = 1;\r\n                        var sharp_ = cc.instantiate(this.sharp_down);\r\n                        sharp_.name = sharp_d_list[rad];\r\n                        sharp_.x = section_count * 1920 + tile_.node.x;\r\n                        sharp_.y = tile_.node.y;\r\n                        cc.find(\"Canvas/root/mapworld/sharp_down\").addChild(sharp_);\r\n                    }\r\n                } \r\n            }\r\n        }\r\n        map_layer.enabled = false;\r\n\r\n        //coin\r\n        var coin_layer = this.node.getComponent(cc.TiledMap).getLayer(\"coin_and_bubble\");\r\n        layer_size = coin_layer.getLayerSize();\r\n        for(var i = 0; i < layer_size.width; i++){\r\n            for(var j = 0; j < layer_size.height; j++){\r\n                var tile = coin_layer.getTiledTileAt(i, j, true);\r\n                //coin\r\n                // console.log(tile.gid);\r\n                if(tile.gid == 268 + 61){  \r\n                    var c = cc.instantiate(this.coin_pre);\r\n                    c.x = section_count * 1920 + tile.node.x;\r\n                    c.y = tile.node.y;\r\n                    //c.active = true;\r\n                    cc.find(\"Canvas/root/mapworld/coin_bubble\").addChild(c);\r\n                    tile.gid = 0;\r\n                }\r\n                else if(tile.gid == 225 + 61){  \r\n                    tile.gid = 0;\r\n                    if(cc.director.getScene().name == 'day'){\r\n                        var rad = 1 + Math.floor(Math.random() * 2);  \r\n                        var b = new cc.Node;\r\n                        if(rad == 1) b = cc.instantiate(this.banana_pre);\r\n                        else if(rad == 2) b = cc.instantiate(this.lego_pre);\r\n                        // else b = cc.instantiate(this.bubble_pre);\r\n                        b.x = section_count * 1920 + tile.node.x;\r\n                        b.y = tile.node.y;\r\n                        //c.active = true;\r\n                        cc.find(\"Canvas/root/mapworld/coin_bubble\").addChild(b);\r\n                    }else if(cc.director.getScene().name == 'multi'){\r\n                        var rad = 1 + Math.floor(Math.random() * 4);  \r\n                        var b = new cc.Node;\r\n                        if(rad == 1) b = cc.instantiate(this.bubble_pre);\r\n                        else if(rad == 2) b = cc.instantiate(this.data_pre);\r\n                        else if(rad == 2) b = cc.instantiate(this.signal_pre);\r\n                        else if(rad == 2) b = cc.instantiate(this.mute_pre);\r\n                        // else b = cc.instantiate(this.bubble_pre);\r\n                        b.x = section_count * 1920 + tile.node.x;\r\n                        b.y = tile.node.y;\r\n                        //c.active = true;\r\n                        cc.find(\"Canvas/root/mapworld/coin_bubble\").addChild(b);\r\n                    }else{\r\n                        var b = cc.instantiate(this.bubble_pre);\r\n                        b.x = section_count * 1920 + tile.node.x;\r\n                        b.y = tile.node.y;\r\n                        //c.active = true;\r\n                        cc.find(\"Canvas/root/mapworld/coin_bubble\").addChild(b);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        coin_layer.enabled = false; \r\n        \r\n\r\n        //enemy init\r\n        //var lv_diff = cc.find(\"Canvas/root/player\").getComponent(((cc.director.getScene().name == 'multi')? 'player_multi' : 'player')).section_count;\r\n        var lv_diff = section_count;\r\n        if(lv_diff && cc.director.getScene().name != \"day\"){\r\n            var range_arr = [360, 300, 300, 250, 200, 150, 120, 100];      // 100 or 80 if one light spawned, 60 or 50 if two, 30 or 20 if three\r\n            var lightcount = 0;\r\n            if(lv_diff >= 12){\r\n                lightcount = 3;\r\n            }else if(lv_diff >= 6){\r\n                lightcount = 2 + (Math.floor(Math.random() * (lv_diff - 6)))? 1 : 0;\r\n            }else if(lv_diff >= 2){\r\n                lightcount = 1 + (Math.floor(Math.random() * (lv_diff - 2)))? 1 : 0;\r\n            }else lightcount = Math.floor(Math.random() * 2);\r\n            if(Math.floor(Math.random() * 2)) lightcount++;\r\n\r\n            var offset = lv_diff * 1920 + ((lv_diff == 0)? 400 : 0);\r\n            for(var i = 0; i < lightcount; i++){\r\n                var range = range_arr[(lightcount-1) * 2 + Math.floor(Math.random() * 2)];\r\n                var enemy = cc.instantiate(this.searchlight);\r\n                if(enemy.getComponent('enemy_wrapper'))enemy.getComponent('enemy_wrapper').range = range;\r\n                enemy.setPosition(offset + (1920/(lightcount+1))*i + (Math.floor(Math.random()*400) -200), 200);\r\n                cc.find(\"Canvas/root/enemy_collection\").addChild(enemy);\r\n            }\r\n        }\r\n\r\n        /*\r\n        //coin \r\n        if(cc.director.getScene().name==\"day\") {\r\n            var offset = lv_diff * 1920 + ((lv_diff == 0)? 400 : 0);\r\n            for(i =0;i<Math.random()*11;i++)\r\n            {\r\n                var money=cc.instantiate(this.coin_pre);\r\n                money.x=Math.random()*1920+offset;\r\n                money.y=500;\r\n                cc.find(\"Canvas/root/powerups\").addChild(money);\r\n            }\r\n        }\r\n\r\n        //bubble item init(dayscene)\r\n        if(cc.director.getScene().name==\"day\")\r\n        {\r\n            for(i =0;i<Math.random()*4;i++)\r\n            {\r\n                var random= Math.floor(Math.random()*2); //0 and 1\r\n                if(random)var powerups=cc.instantiate(this.lego_pre);\r\n                else var powerups=cc.instantiate(this.banana_pre);\r\n                powerups.x=Math.random()*1920+offset;\r\n                powerups.y=0+Math.random()*50;\r\n                cc.find(\"Canvas/root/powerups\").addChild(powerups);\r\n            }\r\n        }*/\r\n\r\n    }\r\n}\r\n"]}