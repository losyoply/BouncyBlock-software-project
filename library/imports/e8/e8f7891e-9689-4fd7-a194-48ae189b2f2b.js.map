{"version":3,"sources":["assets\\scripts\\bird_player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class Bird extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    camera: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    maplist: cc.Node = null;\r\n\r\n    @property(cc.Prefab)\r\n    section: cc.Prefab = null;\r\n\r\n    @property(cc.Node)\r\n    Score: cc.Node = null;\r\n    @property(cc.Node)\r\n    Scoretag: cc.Node = null;\r\n    @property(cc.Node)\r\n    Cointag: cc.Node = null;\r\n    @property(cc.Node)\r\n    coin_point : cc.Node = null; \r\n\r\n    @property(cc.Sprite)\r\n    Color: cc.Sprite = null;\r\n\r\n    @property(cc.AudioClip)\r\n    die_audio : cc.AudioClip = null; \r\n    @property(cc.AudioClip)\r\n    player_jump : cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    get_coin : cc.AudioClip = null;\r\n\r\n    @property(cc.AudioClip)\r\n    bird_back_music : cc.AudioClip = null;// @A@\r\n\r\n    section_count: number = 0;      // on contact with marker, if section_count * 1920 < this.node.x: init next section and section_count ++\r\n    private score: number = 0;\r\n    private paused: boolean = false;\r\n    private speed: number = 150;\r\n    coin: number = 0;\r\n    color: number = 0;\r\n    strip: number = 0;\r\n    base: number = 0;\r\n    last_x: number = 0.0;\r\n\r\n    // color info of new_tileset\r\n    color_list: any = {7: \"#2b3a67\",8: \"#496a81\",9: \"#66999b\", 10: \"#b3af8f\", 11: \"#ffc582\",\r\n    13:\"#1c3144\", 14: \"#596f62\", 15: \"#7ea16b\",16: \"#c3d898\",17: \"#70161d\",\r\n    19 :\"#edebd3\", 20 :\"#edebd3\", 21 :\"#da4167\", 22 :\"#f4d35e\", 23 :\"#f78664\", \r\n    25  :\"#562c2c\", 26 :\"#f2542d\", 27 :\"#f5dfbb\", 28 :\"#0e9595\", 29 :\"#127474\", \r\n    31 :\"#8e9aaf\", 32 :\"#cbc0d3\", 33 :\"#efd3d7\", 34 :\"#feeafa\", 35 :\"#dee2ff\" }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    setcolor() {\r\n        //-----------player color----------------------\r\n        //random choose player color\r\n        this.strip = cc.find('Canvas/root').getComponent('root').color_strip;\r\n        this.base = 6*this.strip;\r\n        this.color = 1 + Math.floor(Math.random() * 4);\r\n        //console.log(this.base +  Math.floor(Math.random() * 5));\r\n        var color_str = this.color_list[this.base + this.color];\r\n        var color = new cc.Color(255,255,255);\r\n        this.Color.node.color = color.fromHEX(color_str);\r\n        //-------------------------------------------------\r\n    }\r\n\r\n    onLoad () {\r\n        cc.audioEngine.pauseMusic(); // @A@\r\n        this.setcolor();\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        this.section_count = 0;\r\n    }\r\n\r\n    onDestroy () {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    start () {\r\n        this.coin = cc.sys.localStorage.getItem(\"coins\");\r\n        this.update_coin();\r\n        this.playBGM();\r\n        this.score = 0;\r\n    }\r\n\r\n    playBGM(){ // @A@\r\n        cc.audioEngine.playMusic(this.bird_back_music, true); \r\n    }\r\n\r\n    update (dt) {\r\n        this.camera_track();\r\n        this.node.x += this.speed * dt * Math.max(1, this.section_count/3);\r\n        \r\n        //--------score-------------------------------\r\n        this.score = (Math.round(this.node.x / 35) > this.score) ? Math.round(this.node.x / 35) : this.score;\r\n        this.Score.getComponent(cc.Label).string = this.score.toString();\r\n        //--------------------------------------------\r\n    }\r\n\r\n    camera_track(){\r\n        this.Scoretag.x = Math.max(this.node.x - 500, -389.764);\r\n        this.Cointag.x = Math.max(this.node.x - 320, -209.764);\r\n        if(this.node.x < 100) this.camera.x = 0;\r\n        else this.camera.x = this.node.x - 100;\r\n    }\r\n\r\n    onBeginContact(contact, self, other){\r\n        // console.log(other.node.group);\r\n        var touch = contact.getWorldManifold().normal;\r\n        // console.log(\"hit node with color \" + other.node.getComponent(cc.TiledTile).gid);\r\n        if(other.tag == 1000){\r\n            //console.log(\"hit marker\");\r\n            if(this.node.x >= this.section_count*1920){\r\n                console.log(\"init next section\");\r\n                this.speed *= 1.1;\r\n                this.section_count++;\r\n                var next_section = cc.instantiate(this.section);\r\n                next_section.x = 1920 * this.section_count;\r\n                next_section.y = 0;\r\n                this.maplist.addChild(next_section);\r\n            } //else console.log(this.node.x, this.section_count);\r\n        }else if(other.node.group == 'ground' || other.node.group == 'mound'){\r\n            console.log(other.node.group + \" (\" + touch.x + \", \" + touch.y + \")\")\r\n            // diee\r\n            this.die_particle();\r\n            this.speed = 0;\r\n            cc.sys.localStorage.setItem(\"coins\", this.coin);\r\n            cc.sys.localStorage.setItem(\"nowscore\", this.score);\r\n            cc.sys.localStorage.setItem(\"nowscene\", 'bird');\r\n            this.scheduleOnce(() => {\r\n                cc.director.loadScene(\"lose\");\r\n            }, 0.3);\r\n        }else if(other.node.name == 'coin'){\r\n            cc.audioEngine.playEffect(this.get_coin, false); \r\n            this.coin++;\r\n            this.update_coin();\r\n            other.node.destroy();\r\n        }\r\n    }\r\n\r\n    die_particle()\r\n    {\r\n        cc.audioEngine.playEffect(this.die_audio, false);\r\n        this.node.getChildByName('eye').active = false;\r\n            var explode=this.node.getChildByName(\"star_explode\");\r\n            explode.active = true;\r\n            explode.getComponent(cc.ParticleSystem).startColor= this.Color.node.color;\r\n            explode.getComponent(cc.ParticleSystem).endColor= this.Color.node.color;\r\n            explode.getComponent(cc.ParticleSystem).endColorVar= this.Color.node.color;\r\n            this.node.getChildByName('color').active = false;\r\n    }\r\n\r\n    onKeyDown(event){\r\n        if(event.keyCode == cc.macro.KEY.space){\r\n            this.jump();\r\n        }\r\n        \r\n        if(event.keyCode == cc.macro.KEY.p){\r\n            if(this.paused){\r\n                this.paused = false;\r\n                cc.audioEngine.resumeAll();\r\n                cc.director.resume();\r\n            }else{\r\n                this.paused = true;\r\n                cc.audioEngine.pauseAll();\r\n                cc.director.pause();\r\n            }            \r\n        }\r\n    }\r\n\r\n    jump(){    \r\n        cc.audioEngine.playEffect(this.player_jump, false); \r\n        this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 200);\r\n    }\r\n\r\n    update_coin(){  // @@ \r\n        this.coin_point.getComponent(cc.Label).string = this.coin.toString();\r\n    }\r\n}\r\n"]}