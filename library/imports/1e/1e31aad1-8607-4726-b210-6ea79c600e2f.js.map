{"version":3,"sources":["assets\\scripts\\menu.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class menu extends cc.Component {\r\n\r\n    @property(cc.AudioClip)\r\n    menu_music : cc.AudioClip = null;// @A@\r\n\r\n    onload() {\r\n        cc.debug.setDisplayStats(false);       \r\n    }\r\n    playBGM(){ // @A@\r\n        cc.audioEngine.playMusic(this.menu_music, true); \r\n    }\r\n\r\n    start () {\r\n        if(!cc.audioEngine.isMusicPlaying()) this.playBGM();\r\n        cc.debug.setDisplayStats(false);\r\n        //cc.audioEngine.playMusic(this.bgm, true);\r\n        let signout = new cc.Component.EventHandler();\r\n        signout.target = this.node;\r\n        signout.component = \"menu\";\r\n        firebase.auth().onAuthStateChanged((user) => {\r\n            if(user){\r\n                signout.handler = \"loadSignout\";\r\n                // grab logged in data from Firebase\r\n                var uid = firebase.auth().currentUser.uid;\r\n                var data = {};\r\n                firebase.database().ref('users/' + uid ).once('value', (snapshot) => {\r\n                    var data = snapshot.val();\r\n                    console.log(data);\r\n                    cc.sys.localStorage.setItem(\"uid\", uid);\r\n                    console.log('uid here ', cc.sys.localStorage.getItem(\"uid\"));\r\n                    cc.sys.localStorage.setItem(\"coins\", data['coins']);\r\n                    cc.sys.localStorage.setItem(\"lego\", data['thing']['lego']);\r\n                    cc.sys.localStorage.setItem(\"powerup\", data['thing']['powerup']);\r\n                    cc.sys.localStorage.setItem(\"banana\", data['thing']['banana']);\r\n                    cc.sys.localStorage.setItem(\"mute\", data['thing']['mute']);\r\n                    cc.sys.localStorage.setItem(\"signal\", data['thing']['signal']);\r\n                    cc.sys.localStorage.setItem(\"highscore\", data['highscore']);\r\n                    cc.sys.localStorage.setItem(\"name\", data['name']);\r\n                    cc.sys.localStorage.setItem(\"email\", data['email']);\r\n                    cc.find(\"Canvas/username\").getComponent(cc.Label).string = \"Welcome, \" + data['name'];\r\n                    var s = \"0\";\r\n                    for( let i = 1; i <= 5; i++) {\r\n                        //console.log(data['thing']['color'][i]);\r\n                        if(data['thing']['color'][i]) s = s + '1';\r\n                        else s = s + '0';\r\n                    }\r\n                    cc.sys.localStorage.setItem(\"color\", s);\r\n                });\r\n            }else{\r\n                // sign in button instead\r\n                cc.find('Canvas/username').active = false;\r\n                cc.find(\"Canvas/out\").getComponent(cc.Label).string = \"sign in\"\r\n                cc.find(\"Canvas/SignOut\").scaleX = -1;\r\n                signout.handler = \"loadSignIn\";\r\n            }\r\n        });\r\n        cc.find(\"Canvas/SignOut\").getComponent(cc.Button).clickEvents.push(signout);\r\n\r\n        let leader = new cc.Component.EventHandler();\r\n        leader.target = this.node;\r\n        leader.component = \"menu\";\r\n        leader.handler = \"loadLeader\";\r\n        cc.find(\"Canvas/leaderboard\").getComponent(cc.Button).clickEvents.push(leader);\r\n\r\n        let night = new cc.Component.EventHandler();\r\n        night.target = this.node;\r\n        night.component = \"menu\";\r\n        night.handler = \"loadNight\";\r\n        cc.find(\"Canvas/night\").getComponent(cc.Button).clickEvents.push(night);\r\n\r\n        let day = new cc.Component.EventHandler();\r\n        day.target = this.node;\r\n        day.component = \"menu\";\r\n        day.handler = \"loadDay\";\r\n        cc.find(\"Canvas/day\").getComponent(cc.Button).clickEvents.push(day);\r\n\r\n        let multi = new cc.Component.EventHandler();\r\n        multi.target = this.node;\r\n        multi.component = \"menu\";\r\n        multi.handler = \"loadMulti\";\r\n        cc.find(\"Canvas/multi\").getComponent(cc.Button).clickEvents.push(multi);\r\n\r\n        let bird = new cc.Component.EventHandler();\r\n        bird.target = this.node;\r\n        bird.component = \"menu\";\r\n        bird.handler = \"loadBird\";\r\n        cc.find(\"Canvas/bird\").getComponent(cc.Button).clickEvents.push(bird);\r\n\r\n        let store = new cc.Component.EventHandler();\r\n        store.target = this.node;\r\n        store.component = \"menu\";\r\n        store.handler = \"loadStore\";\r\n        cc.find(\"Canvas/store\").getComponent(cc.Button).clickEvents.push(store);\r\n\r\n        let t = new cc.Component.EventHandler();\r\n        t.target = this.node;\r\n        t.component = \"menu\";\r\n        t.handler = \"loadrule\";\r\n        cc.find(\"Canvas/rule\").getComponent(cc.Button).clickEvents.push(t);\r\n\r\n    }\r\n\r\n    loadNight(){\r\n        //cc.audioEngine.playEffect(this.press, false);\r\n        cc.director.loadScene(\"test\");\r\n    }\r\n    loadDay(){\r\n        //cc.audioEngine.playEffect(this.press, false);\r\n        cc.director.loadScene(\"day\");\r\n    }\r\n    loadMulti(){\r\n        //cc.audioEngine.playEffect(this.press, false);\r\n        cc.director.loadScene(\"multi_pairing\");\r\n    }\r\n    loadBird(){\r\n        //cc.audioEngine.playEffect(this.press, false);\r\n        cc.director.loadScene(\"bird\");\r\n    }\r\n    loadSignout(){\r\n        //cc.audioEngine.playEffect(this.press, false);\r\n        // kick player off\r\n        firebase.auth().signOut().then(()=>{\r\n            cc.director.loadScene(\"menu\");\r\n            alert(\"You have been signed out.\");\r\n        }).catch((e)=>{\r\n            console.log(e.message);\r\n        })\r\n    }\r\n    loadSignIn(){\r\n        //cc.audioEngine.playEffect(this.press, false);\r\n        cc.director.loadScene(\"start\");\r\n    }\r\n    loadLeader() {\r\n        //cc.audioEngine.playEffect(this.press, false);\r\n        cc.director.loadScene(\"leader\");\r\n    }\r\n\r\n    loadStore () {\r\n        cc.director.loadScene(\"store\");\r\n    }\r\n\r\n    loadrule () {\r\n        cc.director.loadScene(\"tutorial\");\r\n    }\r\n   \r\n}\r\n"]}