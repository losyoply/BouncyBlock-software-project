{"version":3,"sources":["assets\\scripts\\player_multi.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA4B,0BAAY;IAAxC;QAAA,qEAylBC;QAtlBG,YAAM,GAAY,IAAI,CAAC;QAGvB,aAAO,GAAY,IAAI,CAAC;QAGxB,UAAI,GAAc,IAAI,CAAC;QAEvB,UAAI,GAAc,IAAI,CAAC;QAEvB,UAAI,GAAc,IAAI,CAAC;QAEvB,UAAI,GAAc,IAAI,CAAC;QAEvB,UAAI,GAAc,IAAI,CAAC;QAEvB,UAAI,GAAc,IAAI,CAAC;QAEvB,UAAI,GAAc,IAAI,CAAC;QAEvB,UAAI,GAAc,IAAI,CAAC;QAEvB,UAAI,GAAc,IAAI,CAAC;QAEvB,UAAI,GAAc,IAAI,CAAC;QAEvB,WAAK,GAAc,IAAI,CAAC;QAExB,WAAK,GAAc,IAAI,CAAC;QAExB,WAAK,GAAc,IAAI,CAAC;QAExB,WAAK,GAAc,IAAI,CAAC;QAExB,WAAK,GAAc,IAAI,CAAC;QAExB,WAAK,GAAc,IAAI,CAAC;QAExB,WAAK,GAAc,IAAI,CAAC;QAExB,WAAK,GAAc,IAAI,CAAC;QAExB,WAAK,GAAc,IAAI,CAAC;QAExB,WAAK,GAAc,IAAI,CAAC;QAExB,WAAK,GAAc,IAAI,CAAC;QAGxB,WAAK,GAAY,IAAI,CAAC;QAEtB,WAAK,GAAc,IAAI,CAAC;QAExB,WAAK,GAAiB,IAAI,CAAC;QAG3B,gBAAU,GAAa,IAAI,CAAC;QAC5B,UAAI,GAAW,CAAC,CAAC;QAGjB,iBAAW,GAAkB,IAAI,CAAC;QAElC,cAAQ,GAAkB,IAAI,CAAC;QAG/B,oBAAc,GAAa,IAAI,CAAC;QAChC,aAAO,GAAW,CAAC,CAAC;QAEpB,eAAS,GAAkB,IAAI,CAAC;QAEhC,wBAAkB,GAAkB,IAAI,CAAC;QAEzC,iBAAW,GAAkB,IAAI,CAAC;QAElC,aAAO,GAAkB,IAAI,CAAC;QAE9B,sBAAgB,GAAkB,IAAI,CAAC,CAAA,MAAM;QAG7C,gBAAU,GAAa,IAAI,CAAC;QAE5B,kBAAY,GAAa,IAAI,CAAC;QAE9B,gBAAU,GAAa,IAAI,CAAC;QAE5B,gBAAU,GAAY,KAAK,CAAC;QAC5B,YAAM,GAAY,KAAK,CAAC;QAChB,WAAK,GAAW,CAAC,CAAC;QAClB,YAAM,GAAY,KAAK,CAAC;QAChC,2BAA2B;QACnB,cAAQ,GAAW,CAAC,CAAC;QAErB,UAAI,GAAW,CAAC,CAAC;QACzB,UAAI,GAAQ,CAAC,CAAC;QACN,eAAS,GAAW,CAAC,CAAC;QAE9B,YAAM,GAAQ,CAAC,CAAC;QACR,cAAQ,GAAW,CAAC,CAAC;QAErB,cAAQ,GAAG,EAAE,CAAC;QACd,UAAI,GAAY,KAAK,CAAC;QAEtB,SAAG,GAAW,CAAC,CAAC;QAChB,cAAQ,GAAW,CAAC,CAAC;QACrB,eAAS,GAAW,CAAC,CAAC,CAAE,gDAAgD;QACxE,cAAQ,GAAY,IAAI,CAAC;QACzB,WAAK,GAAY,KAAK,CAAC;QACvB,WAAK,GAAY,KAAK,CAAC;QACvB,eAAS,GAAW,IAAI,CAAC;QACzB,QAAE,GAAW,IAAI,CAAC;QAClB,UAAI,GAAW,IAAI,CAAC;QAC5B,mBAAa,GAAG,CAAC,CAAC,CAAM,wGAAwG;QAEhI,WAAK,GAAW,CAAC,CAAC;QACV,YAAM,GAAY,KAAK,CAAC;QAEhC,WAAK,GAAW,CAAC,CAAC;QAClB,WAAK,GAAW,CAAC,CAAC;QAClB,UAAI,GAAW,CAAC,CAAC;QACjB,YAAM,GAAW,GAAG,CAAC;QAErB,4BAA4B;QAC5B,gBAAU,GAAQ,EAAC,CAAC,EAAE,SAAS,EAAC,CAAC,EAAE,SAAS,EAAC,CAAC,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS;YACvF,EAAE,EAAC,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAC,EAAE,EAAE,SAAS,EAAC,EAAE,EAAE,SAAS;YACtE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS;YACzE,EAAE,EAAG,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS;YAC1E,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,CAAA;;IAwd/E,CAAC;IAtdG,wBAAwB;IAExB,yBAAQ,GAAR;QACI,+CAA+C;QAC/C,4BAA4B;QAC5B,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC;QACrE,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,GAAC,IAAI,CAAC,KAAK,CAAC;QAC7B,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC;QAC/C,2DAA2D;QAC3D,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;QACxD,IAAI,KAAK,GAAG,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,CAAC,CAAC;QACtC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QACjD,mDAAmD;IACvD,CAAC;IAED,uBAAM,GAAN;QACI,EAAE,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC5B,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAC3E,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QACvE,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;QACb,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;IAC3B,CAAC;IAED,0BAAS,GAAT;QACI,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAC5E,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAC5E,CAAC;IAED,+BAAc,GAAd,UAAe,OAAO,EAAE,IAAI,EAAE,KAAK;QAC/B,0BAA0B;QAC1B,IAAI,KAAK,GAAG,OAAO,CAAC,gBAAgB,EAAE,CAAC,MAAM,CAAC;QAC9C,mFAAmF;QACnF,IAAG,KAAK,CAAC,GAAG,IAAI,IAAI,EAAC;YACjB,+BAA+B;YAC/B,IAAG,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,aAAa,GAAC,IAAI,EAAC;gBACtC,oCAAoC;gBACpC,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAC,IAAI,CAAC,aAAa,GAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;gBAC5E,qBAAqB;gBACrB,8DAA8D;gBAC9D,IAAI,YAAY,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;gBACvD,YAAY,CAAC,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC;gBAC3C,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC;gBACnB,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;aACvC;SACJ;aAAK,IAAG,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,QAAQ,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,OAAO,EAAC;YACjE,wEAAwE;YACxE,IAAG,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,CAAC,EAAC;gBAC/B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBAClB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnB,IAAG,CAAC,IAAI,CAAC,QAAQ,IAAI,KAAK,CAAC,CAAC;oBAAE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;aACtD;YAED,IAAG,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,OAAO,EAAE;gBAC5B,IAAG,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;oBAChI,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;oBAC/C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;oBACnB,IAAG,IAAI,CAAC,KAAK;wBAAE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC;oBAC3F,6BAA6B;iBAChC;aACJ;SACJ;aAAK,IAAG,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,MAAM,EAAC,EAAE,MAAM;YACxC,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;YAChD,IAAI,CAAC,IAAI,EAAE,CAAC;YACZ,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;SACxB;aAAK,IAAG,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,QAAQ,EAAC,EAAE,KAAK;YACzC,IAAG,KAAK,CAAC,GAAG,IAAI,CAAC,EAAC,EAAE,kBAAkB;gBAClC,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;gBAC1D,IAAI,CAAC,OAAO,EAAE,CAAA;gBACd,IAAI,CAAC,cAAc,EAAE,CAAC;gBACtB,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;aACvB;YACD,MAAM;iBACD,IAAG,KAAK,CAAC,GAAG,IAAI,CAAC,EAAC,EAAE,eAAe;gBACrC,2DAA2D;gBAC3D,IAAI,CAAC,IAAI,EAAE,CAAC;gBACZ,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;aACxB;iBAAK,IAAG,KAAK,CAAC,GAAG,IAAI,CAAC,EAAC,EAAE,gBAAgB;gBAClC,0DAA0D;gBAC1D,IAAI,CAAC,MAAM,EAAE,CAAC;gBACd,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACrB,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;aAC5B;iBAAK,IAAG,KAAK,CAAC,GAAG,IAAI,CAAC,EAAC,EAAE,gBAAgB;gBACtC,2DAA2D;gBACvD,IAAI,CAAC,IAAI,EAAE,CAAC;gBACZ,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;aACxB;SACR;aAAK,IAAG,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,SAAS,EAAC;YAClC,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;YAC/C,OAAO;YACP,yBAAyB;YACzB,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,4BAA4B;YAC5B,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;aAAK,IAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,GAAG,IAAE,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,IAAE,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,QAAQ,EAAC;YACzF,IAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,GAAG,EAAC;gBACzB,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;aACtD;YACD,OAAO;YACP,yBAAyB;YACzB,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,4BAA4B;YAC5B,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;IACL,CAAC;IACD,6BAAY,GAAZ;QAEI,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;QACjD,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;QAC/C,IAAI,OAAO,GAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;QACrD,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;QACtB,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,UAAU,GAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;QAC1E,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,QAAQ,GAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;QACxE,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,WAAW,GAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;QAC3E,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACrD,CAAC;IACD,sBAAK,GAAL;QAAA,iBAmBC;QAlBG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAG,IAAI,CAAC,EAAE,IAAI,SAAS,EAAC;YACpB,kBAAkB;YAClB,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,GAAG,kBAAkB,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE;gBACjF,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,KAAI,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE;oBAClE,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;oBACnB,KAAI,CAAC,UAAU,EAAE,CAAC;gBACtB,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;SACN;aAAI;YACD,iBAAiB;YACjB,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,GAAG,iBAAiB,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE;gBAChF,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,KAAI,CAAC,IAAI,GAAG,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE;oBACnE,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;oBACnB,KAAI,CAAC,UAAU,EAAE,CAAC;gBACtB,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAED,6BAAY,GAAZ,UAAa,OAAO,EAAE,IAAI,EAAE,KAAK;QAC7B,uFAAuF;QACvF,kEAAkE;QAClE,IAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,EAAC;YACrD,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;YAC9C,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SACvB;aAAK,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,OAAO,EAAE;YACnC,4EAA4E;YACxE,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;YAC9C,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACxB,IAAI;SACP;IACL,CAAC;IAED,sBAAK,GAAL;QACI,IAAI,GAAG,GAAG,QAAQ,CAAC,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;QACtD,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAChD,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACjD,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAChD,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QACpD,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QACtD,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAG,GAAG,IAAI,CAAC;YAAE,IAAI,CAAC,EAAE,GAAG,SAAS,CAAC;;YAC5B,IAAI,CAAC,EAAE,GAAG,QAAQ,CAAC;QACxB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;QACb,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAC,IAAI,CAAC,IAAI,EAAC,IAAI,CAAC,KAAK,EAAC,IAAI,CAAC,KAAK,EAAC,IAAI,CAAC,KAAK,EAAC,IAAI,CAAC,KAAK,EAAC,IAAI,CAAC,KAAK,EAAC,IAAI,CAAC,KAAK,EAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC/J,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,OAAO,CAAC,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAEhD,mDAAmD;QACnD,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,UAAU,GAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;QACtG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,QAAQ,GAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;QACpG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,WAAW,GAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;QACvG,mDAAmD;QACnD,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IACD,wBAAO,GAAP;QACI,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;IAC1D,CAAC;IAED,uBAAM,GAAN,UAAQ,EAAE;QACN,IAAG,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,EAAC;YAC1B,IAAG,CAAC,IAAI,CAAC,MAAM,EAAC;gBACZ,IAAI,EAAE,GAAG,IAAI,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC/B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;aAC9B;iBAAI;gBACD,IAAI,EAAE,GAAG,IAAI,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC/B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACtD;YACD,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;SACtC;QACD,IAAG,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,EAAC;YACnB,OAAO;YACP,yBAAyB;YACzB,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;QACD,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAG,CAAC,IAAI,CAAC,IAAI;YAAE,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC;QAClD,IAAG,IAAI,CAAC,SAAS,IAAI,CAAC,EAAC;YACnB,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;YACnC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC;SACvB;aAAK,IAAG,IAAI,CAAC,KAAK,EAAC;YAChB,wBAAwB;YACxB,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;YACnC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SACtB;QACD,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5C,IAAI,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;QAC1D,+FAA+F;QAC/F,IAAG,IAAI,CAAC,GAAG,IAAE,CAAC,IAAE,EAAE,GAAC,EAAE;YAAE,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,YAAY,GAAC,GAAG,CAAC;;YACvG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,YAAY,GAAC,CAAC,CAAC;QACxF,qCAAqC;QACrC,IAAG,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC;YAAE,IAAI,CAAC,UAAU,EAAE,CAAC;aAC5C,IAAG,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;YAAE,IAAI,CAAC,SAAS,EAAE,CAAC;aACjD,IAAG,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC;YAAE,IAAI,CAAC,IAAI,CAAC,KAAK,GAAC,CAAC,CAAC;QAChD,8CAA8C;QAC9C,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;QACrG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QACjE,8CAA8C;IAClD,CAAC;IACD,2BAAU,GAAV;QACI,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC;IAC1B,CAAC;IACD,0BAAS,GAAT;QACI,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC;IAC1B,CAAC;IAED,6BAAY,GAAZ;QACI,IAAG,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,GAAG;YAAE,OAAO;QAEvC,IAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG;YAAE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;;YACnC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC;IAC3C,CAAC;IAED,2BAAU,GAAV;QAAA,iBAyGC;QAxGG,IAAG,CAAC,IAAI,CAAC,MAAM,EAAC;YACZ,IAAI,GAAG,GAAG,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;YAE1E,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,QAAQ;gBACvB,IAAI,EAAE,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;gBAClC,OAAO,CAAC,GAAG,CAAC,qBAAqB,GAAG,EAAE,CAAC,CAAC;gBACxC,IAAG,EAAE,GAAG,CAAC,EAAE,EAAC;oBACR,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;oBAC7C,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,KAAI,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,IAAI;wBACxE,IAAI,UAAU,GAAG,KAAI,CAAC,KAAK,CAAC;wBAC5B,IAAI,WAAW,GAAG,CAAC,CAAC;wBACpB,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,EAAE,GAAG,iBAAiB,CAAC,CAAC;wBACzC,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,KAAI,CAAC,IAAI,GAAG,OAAO,GAAG,KAAI,CAAC,EAAE,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,KAAI,CAAC,KAAK,EAAE;4BACzF,IAAG,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,MAAM,EAAE;gCAAE,KAAI,CAAC,UAAU,EAAE,CAAC;4BAEhG,IAAG,KAAI,CAAC,EAAE,IAAI,SAAS;gCAAE,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;;gCAC3E,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;4BAC7D,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,EAAE,UAAU,CAAC,CAAC;4BACtD,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,EAAE,WAAW,CAAC,CAAC;4BACxD,OAAO,CAAC,GAAG,CAAC,oBAAoB,GAAG,UAAU,EAAE,WAAW,CAAC,CAAC;4BAC5D,OAAO,CAAC,GAAG,CAAC,iBAAiB,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;4BACvH,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,KAAI,CAAC,IAAI,CAAC,CAAC;4BAChD,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,KAAI,CAAC,IAAI,CAAC,CAAC;4BAC/C,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,KAAI,CAAC,MAAM,CAAC,CAAC;4BACnD,IAAG,UAAU,IAAI,WAAW,EAAC;gCACzB,IAAI,OAAO,GAAC,KAAI,CAAC,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;gCACrD,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;gCACtB,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,UAAU,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gCACvE,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,QAAQ,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;gCAC1E,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,WAAW,GAAG,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;gCAC5E,KAAI,CAAC,YAAY,CAAC;oCACd,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;gCACvC,CAAC,EAAE,GAAG,CAAC,CAAC;6BACX;iCAAI;gCACD,KAAI,CAAC,YAAY,EAAE,CAAC;gCACpB,KAAI,CAAC,YAAY,CAAC;oCACd,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;gCACxC,CAAC,EAAE,GAAG,CAAC,CAAC;6BACX;wBACL,CAAC,CAAC,CAAC;oBACP,CAAC,CAAC,CAAC;iBACN;qBAAK,IAAG,EAAE,GAAG,CAAC,EAAC;oBACZ,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;oBACxC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,GAAC,CAAC,CAAC,EAAE;wBACZ,KAAI,CAAC,UAAU,EAAE,CAAC;oBACtB,CAAC,CAAC,CAAC;oBACH,IAAG,CAAC,KAAI,CAAC,SAAS,EAAC;wBACf,KAAI,CAAC,QAAQ,EAAE,CAAC;wBAChB,OAAO,CAAC,GAAG,CAAC,oBAAoB,GAAG,KAAI,CAAC,QAAQ,CAAC,CAAC;wBAClD,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,KAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;wBAC7C,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,CAAC,CAAC;wBAClD,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;wBACnB,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;wBACpB,KAAI,CAAC,YAAY,CAAC;4BACd,KAAI,CAAC,QAAQ,EAAE,CAAC;4BAChB,OAAO,CAAC,GAAG,CAAC,kCAAkC,GAAG,KAAI,CAAC,QAAQ,CAAC,CAAC;4BAChE,IAAG,CAAC,KAAI,CAAC,QAAQ,EAAC;gCACd,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gCACpB,IAAI,SAAS,GAAG,KAAI,CAAC,UAAU,CAAC,KAAI,CAAC,IAAI,GAAG,KAAI,CAAC,KAAK,CAAC,CAAC;gCACxD,IAAI,KAAK,GAAG,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,CAAC,CAAC;gCACtC,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;6BACpD;wBACL,CAAC,EAAE,CAAC,CAAC,CAAC;qBACT;iBACJ;;oBAAK,KAAI,CAAC,UAAU,EAAE,CAAC;YAC5B,CAAC,CAAC,CAAC;SACN;aAAI;YACD,IAAG,IAAI,CAAC,EAAE,IAAI,SAAS,EAAC;gBACpB,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,GAAG,iBAAiB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,QAAQ;oBACvF,IAAG,QAAQ,CAAC,MAAM,EAAE,EAAC;wBACjB,IAAI,UAAU,GAAG,KAAI,CAAC,KAAK,CAAC;wBAC5B,IAAI,WAAW,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;wBAC3C,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,KAAI,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;wBACzD,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,EAAE,UAAU,CAAC,CAAC;wBACtD,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,EAAE,WAAW,CAAC,CAAC;wBACxD,OAAO,CAAC,GAAG,CAAC,oBAAoB,GAAG,UAAU,EAAE,WAAW,CAAC,CAAC;wBAC5D,OAAO,CAAC,GAAG,CAAC,iBAAiB,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;wBACvH,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,KAAI,CAAC,IAAI,CAAC,CAAC;wBAChD,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,KAAI,CAAC,IAAI,CAAC,CAAC;wBAC/C,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,KAAI,CAAC,MAAM,CAAC,CAAC;wBACnD,IAAG,UAAU,IAAI,WAAW;4BAAE,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;;4BAC5D,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;qBAC5C;;wBAAK,KAAI,CAAC,UAAU,EAAE,CAAC;gBAC5B,CAAC,CAAC,CAAC;aACN;iBAAI;gBACD,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,GAAG,kBAAkB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,QAAQ;oBACxF,IAAG,QAAQ,CAAC,MAAM,EAAE,EAAC;wBACjB,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,KAAI,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;wBACzD,IAAI,UAAU,GAAG,KAAI,CAAC,KAAK,CAAC;wBAC5B,IAAI,WAAW,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;wBAC3C,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,KAAI,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;wBACzD,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,EAAE,UAAU,CAAC,CAAC;wBACtD,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,EAAE,WAAW,CAAC,CAAC;wBACxD,OAAO,CAAC,GAAG,CAAC,oBAAoB,GAAG,UAAU,EAAE,WAAW,CAAC,CAAC;wBAC5D,OAAO,CAAC,GAAG,CAAC,iBAAiB,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;wBACvH,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,KAAI,CAAC,IAAI,CAAC,CAAC;wBAChD,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,KAAI,CAAC,IAAI,CAAC,CAAC;wBAC/C,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,KAAI,CAAC,MAAM,CAAC,CAAC;wBACnD,IAAG,UAAU,IAAI,WAAW;4BAAE,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;;4BAC5D,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;qBAC5C;;wBAAK,KAAI,CAAC,UAAU,EAAE,CAAC;gBAC5B,CAAC,CAAC,CAAC;aACN;SACJ;IACL,CAAC;IAED,0BAAS,GAAT,UAAU,KAAK;QAAf,iBAiFC;QA/EG,IAAG,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAC;YACnC,IAAG,IAAI,CAAC,QAAQ;gBAAE,IAAI,CAAC,IAAI,EAAE,CAAC;SACjC;QACD,IAAG,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAC;YAClC,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;YACd,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC;SAC5B;aACI,IAAG,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAC;YACxC,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;YACb,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC;SAC5B;QAGD,IAAG,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC,EAAC;YACpD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,CAAC,CAAC;YAClD,IAAI,CAAC,IAAI,EAAE,CAAC;YACZ,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,mDAAmD;YACnD,IAAG,IAAI,CAAC,EAAE,IAAI,SAAS,EAAC;gBACpB,kBAAkB;gBAClB,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,QAAQ;oBAC/E,IAAI,IAAI,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;oBACpC,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,KAAI,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,GAAG,CAAC,IAAI,GAAC,CAAC,CAAC,CAAC;gBAC5E,CAAC,CAAC,CAAC;aACN;iBAAI;gBACD,iBAAiB;gBACjB,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,QAAQ;oBAChF,IAAI,IAAI,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;oBACpC,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,KAAI,CAAC,IAAI,GAAG,UAAU,CAAC,CAAC,GAAG,CAAC,IAAI,GAAC,CAAC,CAAC,CAAC;gBAC7E,CAAC,CAAC,CAAC;aACN;YACD,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,aAAa,GAAC,CAAC,CAAC,CAAC;YACpD,IAAG,IAAI,CAAC,QAAQ;gBAAE,KAAK,IAAI,GAAG,CAAC;YAC/B,IAAI,CAAC,YAAY,CAAC;gBACd,KAAI,CAAC,KAAK,EAAE,CAAC;gBACb,IAAG,CAAC,KAAI,CAAC,KAAK,EAAC;oBACX,IAAI,SAAS,GAAG,KAAI,CAAC,UAAU,CAAC,KAAI,CAAC,IAAI,GAAG,KAAI,CAAC,KAAK,CAAC,CAAC;oBACxD,IAAI,KAAK,GAAG,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,CAAC,CAAC;oBACtC,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;iBACpD;YACL,CAAC,EAAE,KAAK,CAAC,CAAC;SACb;QACD,IAAG,CAAC,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC,EAAC,EAAE,KAAK;YAC5D,oBAAoB;YACpB,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;YAC/B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,IAAI,CAAC,YAAY,CAAC;gBACd,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;gBAC3B,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACvB,CAAC,EAAE,CAAC,CAAC,CAAC;SACT;QACD,IAAG,CAAC,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAC,EAAE,KAAK;YAC3D,oBAAoB;YACpB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;YAChD,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,YAAY,CAAC;gBACd,KAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,IAAG,CAAC,KAAI,CAAC,QAAQ;oBAAE,KAAI,CAAC,YAAY,CAAC,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YACzE,CAAC,EAAE,CAAC,CAAC,CAAC;SACT;QACD,IAAG,CAAC,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC,EAAC,EAAE,KAAK;YACzD,kBAAkB;YAClB,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;YAC9C,IAAI,CAAC,IAAI,EAAE,CAAC;YACZ,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,CAAC,YAAY,CAAC;gBACd,KAAI,CAAC,SAAS,EAAE,CAAC;gBACjB,IAAG,CAAC,KAAI,CAAC,SAAS;oBAAE,KAAI,CAAC,UAAU,CAAC,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YACxE,CAAC,EAAE,CAAC,CAAC,CAAC;SACT;IAGL,CAAC;IACD,wBAAO,GAAP,UAAQ,KAAK;QACT,QAAO,KAAK,CAAC,OAAO,EAAC;YACjB,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI;gBAClB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;gBACb,MAAM;YACV,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK;gBACnB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;gBACb,MAAM;SACb;IACL,CAAC;IAED,qBAAI,GAAJ;QACI,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QACnD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,cAAc,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QACpE,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnB,IAAG,CAAC,IAAI,CAAC,UAAU;YAAE,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QAC3C,+DAA+D;IACnE,CAAC;IACD,4BAAW,GAAX;QACI,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;IACzE,CAAC;IACD,+BAAc,GAAd;QACG,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;IAC/E,CAAC;IACD,MAAM;IACN,4BAAW,GAAX;QAEI,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;IAEzE,CAAC;IACD,8BAAa,GAAb;QAEI,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;IAC7E,CAAC;IACD,4BAAW,GAAX;QAEI,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;IACzE,CAAC;IArlBD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0CACK;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;2CACM;IAGxB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wCACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wCACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wCACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wCACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wCACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wCACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wCACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wCACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wCACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wCACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yCACI;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yCACI;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yCACI;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yCACI;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yCACI;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yCACI;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yCACI;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yCACI;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yCACI;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yCACI;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yCACI;IAGxB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;yCACI;IAEtB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yCACI;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;yCACI;IAG3B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8CACU;IAI5B;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;+CACW;IAElC;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;4CACQ;IAG/B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;kDACc;IAGhC;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;6CACS;IAEhC;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;sDACkB;IAEzC;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;+CACW;IAElC;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;2CACO;IAE9B;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;oDACgB;IAGvC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8CACU;IAE5B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACY;IAE9B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8CACU;IAtFnB,MAAM;QADlB,OAAO;OACK,MAAM,CAylBlB;IAAD,aAAC;CAzlBD,AAylBC,CAzlB2B,EAAE,CAAC,SAAS,GAylBvC;AAzlBY,wBAAM","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class Player extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    camera: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    maplist: cc.Node = null;\r\n\r\n    @property(cc.Prefab)\r\n    sec0: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec1: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec2: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec3: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec4: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec5: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec6: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec7: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec8: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec9: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec10: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec11: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec12: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec13: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec14: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec15: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec16: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec17: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec18: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec19: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    sec20: cc.Prefab = null;\r\n\r\n    @property(cc.Node)\r\n    Score: cc.Node = null;\r\n    @property(cc.Sprite)\r\n    Color: cc.Sprite = null;\r\n    @property(cc.AudioClip)\r\n    notif: cc.AudioClip = null;\r\n\r\n    @property(cc.Node)\r\n    coin_point : cc.Node = null;  \r\n    coin: number = 0;\r\n\r\n    @property(cc.AudioClip)\r\n    player_jump : cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    get_coin : cc.AudioClip = null;\r\n\r\n    @property(cc.Node)\r\n    bubble_powerup : cc.Node = null; \r\n    powerup: number = 0;\r\n    @property(cc.AudioClip)\r\n    die_audio : cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    get_powerup_bubble : cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    sharp_knife : cc.AudioClip = null; \r\n    @property(cc.AudioClip)\r\n    shooted : cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    multi_back_music : cc.AudioClip = null;// @A@\r\n\r\n    @property(cc.Node)\r\n    data_point : cc.Node = null; \r\n    @property(cc.Node)\r\n    signal_point : cc.Node = null; \r\n    @property(cc.Node)\r\n    mute_point : cc.Node = null; \r\n\r\n    debug_mode: boolean = false;\r\n    hidden: boolean = false;\r\n    private noisy: number = 0;\r\n    private unhide: boolean = false;\r\n    // private ACK: number = 5;\r\n    private recv_msg: number = 0;\r\n\r\n    private data: number = 0;\r\n    mute:number=0;\r\n    private in_hiding: number = 0;\r\n\r\n    signal:number=0;\r\n    private on_boost: number = 0;\r\n\r\n    private sec_list = [];\r\n    private dead: boolean = false;\r\n\r\n    private dir: number = 0;\r\n    private prev_dir: number = 0;\r\n    private fly_state: number = 0;  // 0 for on ground, 1 for flying, -1 for falling\r\n    private on_floor: boolean = true;\r\n    private stick: boolean = false;\r\n    private invis: boolean = false;\r\n    private chameleon: string = null;\r\n    private id: string = null;\r\n    private room: string = null;\r\n    section_count = 0;      // on contact with marker, if section_count * 1920 < this.node.x: init next section and section_count ++\r\n\r\n    score: number = 0;\r\n    private hiatus: boolean = false;\r\n\r\n    color: number = 0;\r\n    strip: number = 0;\r\n    base: number = 0;\r\n    last_x: number = 0.0;\r\n\r\n    // color info of new_tileset\r\n    color_list: any = {7: \"#2b3a67\",8: \"#496a81\",9: \"#66999b\", 10: \"#b3af8f\", 11: \"#ffc582\",\r\n    13:\"#1c3144\", 14: \"#596f62\", 15: \"#7ea16b\",16: \"#c3d898\",17: \"#70161d\",\r\n    19 :\"#083e77\", 20 :\"#edebd3\", 21 :\"#da4167\", 22 :\"#f4d35e\", 23 :\"#f78664\", \r\n    25  :\"#562c2c\", 26 :\"#f2542d\", 27 :\"#f5dfbb\", 28 :\"#0e9595\", 29 :\"#127474\", \r\n    31 :\"#8e9aaf\", 32 :\"#cbc0d3\", 33 :\"#efd3d7\", 34 :\"#feeafa\", 35 :\"#dee2ff\" }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    setcolor() {\r\n        //-----------player color----------------------\r\n        //random choose player color\r\n        this.strip = cc.find('Canvas/root').getComponent('root').color_strip;\r\n        this.base = 1 + 6*this.strip;\r\n        this.color = 1 + Math.floor(Math.random() * 4);\r\n        // console.log(this.base +  Math.floor(Math.random() * 5));\r\n        var color_str = this.color_list[this.base + this.color];\r\n        var color = new cc.Color(255,255,255);\r\n        this.Color.node.color = color.fromHEX(color_str);\r\n        //-------------------------------------------------\r\n    }\r\n\r\n    onLoad () {\r\n        cc.audioEngine.pauseMusic();\r\n        this.setcolor();\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        this.dir = 0;\r\n        this.section_count = 0;\r\n    }\r\n\r\n    onDestroy () {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    onBeginContact(contact, self, other){\r\n        // console.log(other.tag);\r\n        var touch = contact.getWorldManifold().normal;\r\n        // console.log(\"hit node with color \" + other.node.getComponent(cc.TiledTile).gid);\r\n        if(other.tag == 1000){\r\n            //// console.log(\"hit marker\");\r\n            if(this.node.x >= this.section_count*1920){\r\n                // console.log(\"init next section\");\r\n                this.section_count++;\r\n                var rand = Math.floor(Math.random() * Math.min(2+this.section_count*3, 21));\r\n                // console.log(rand);\r\n                // console.log(\"To instantiate: \" + this.sec_list[rand].name);\r\n                var next_section = cc.instantiate(this.sec_list[rand]);\r\n                next_section.x = 1920 * this.section_count;\r\n                next_section.y = 0;\r\n                this.maplist.addChild(next_section);\r\n            }\r\n        }else if(other.node.group == 'ground' || other.node.group == 'mound'){\r\n            // console.log(other.node.group + \" (\" + touch.x + \", \" + touch.y + \")\")\r\n            if(touch.y && this.fly_state == -1){\r\n                this.stick = true;\r\n                this.fly_state = 0;\r\n                if(!this.on_floor && touch.y) this.on_floor = true;\r\n            }\r\n\r\n            if(other.node.group == 'mound') {\r\n                if(((other.node.getComponent(cc.TiledTile).gid == this.color + this.base && touch.x) || this.invis) && !this.noisy && !this.unhide) {\r\n                    this.node.getChildByName('eye').active = false;\r\n                    this.hidden = true;\r\n                    if(this.invis) this.chameleon = this.color_list[other.node.getComponent(cc.TiledTile).gid];\r\n                    // this.last_x = this.node.x;\r\n                }\r\n            }    \r\n        }else if(other.node.group == 'coin'){ // @@ \r\n            cc.audioEngine.playEffect(this.get_coin, false); \r\n            this.coin++;\r\n            this.update_coin();\r\n            other.node.destroy();\r\n        }else if(other.node.group == 'bubble'){ // @@\r\n            if(other.tag == 3){ // colorful bubble\r\n                cc.audioEngine.playEffect(this.get_powerup_bubble, false); \r\n                this.powerup++\r\n                this.update_powerup();\r\n                other.node.destroy();\r\n             }\r\n             //losy\r\n             else if(other.tag == 4){ // bubble mute \r\n                //  cc.audioEngine.playEffect(this.get_B_L_bubble, false); \r\n                this.mute++;\r\n                this.update_mute();\r\n                other.node.destroy();\r\n            }else if(other.tag == 5){ // bubble signal\r\n                    // cc.audioEngine.playEffect(this.get_B_L_bubble, false); \r\n                    this.signal++;\r\n                    this.update_signal();\r\n                    other.node.destroy();\r\n                    other.node.destroy();\r\n            }else if(other.tag == 6){ // colorful data\r\n                //  cc.audioEngine.playEffect(this.get_B_L_bubble, false); \r\n                    this.data++;\r\n                    this.update_data();\r\n                    other.node.destroy();\r\n                }\r\n        }else if(other.node.name == 'missile'){\r\n            cc.audioEngine.playEffect(this.shooted, false);\r\n            // diee\r\n            // deploy white particles\r\n            this.die_particle();\r\n            // this.node.active = false;\r\n            this.loser();\r\n        }else if((other.node.name[0] == 's'&&other.node.name[1] == 'h')||other.node.name == 'spider'){\r\n            if(other.node.name[0] == 's'){\r\n                cc.audioEngine.playEffect(this.sharp_knife, false);\r\n            }\r\n            // diee\r\n            // deploy white particles\r\n            this.die_particle();\r\n            // this.node.active = false;\r\n            this.loser();\r\n        }\r\n    }\r\n    die_particle()\r\n    {\r\n        cc.audioEngine.playEffect(this.die_audio, false);\r\n        this.node.getChildByName('eye').active = false;\r\n        var explode=this.node.getChildByName(\"star_explode\");\r\n        explode.active = true;\r\n        explode.getComponent(cc.ParticleSystem).startColor= this.Color.node.color;\r\n        explode.getComponent(cc.ParticleSystem).endColor= this.Color.node.color;\r\n        explode.getComponent(cc.ParticleSystem).endColorVar= this.Color.node.color;\r\n        this.node.getChildByName('color').active = false;\r\n    }\r\n    loser(){\r\n        this.dead = true;\r\n        if(this.id == 'creator'){\r\n            // self is creator\r\n            firebase.database().ref('in_game/' + this.room + '/res/creator_res').set(this.score, ()=>{\r\n                firebase.database().ref('in_game/' + this.room + '/joiner').set(-100, () =>{\r\n                    this.hiatus = true;\r\n                    this.check_mail();\r\n                });\r\n            });\r\n        }else{\r\n            // self is joiner\r\n            firebase.database().ref('in_game/' + this.room + '/res/joiner_res').set(this.score, ()=>{\r\n                firebase.database().ref('in_game/' + this.room + '/creator').set(-100, () =>{\r\n                    this.hiatus = true;\r\n                    this.check_mail();\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    onEndContact(contact, self, other) {\r\n        //a bug happens when the color of mound is same as the color of player, not solved yet \r\n        // fixed with mound. player should now check collisions with mound\r\n        if(this.getComponent(cc.RigidBody).linearVelocity.y != 0){\r\n            this.node.getChildByName('eye').active = true;\r\n            this.hidden = false;\r\n        }else if( other.node.group == 'mound') {\r\n            // if(other.node.getComponent(cc.TiledTile).gid == this.color + this.base) {\r\n                this.node.getChildByName('eye').active = true;\r\n                this.hidden = false;\r\n            // }\r\n        }\r\n    }\r\n\r\n    start () {\r\n        var _id = parseInt(cc.sys.localStorage.getItem('id'));\r\n        this.room = cc.sys.localStorage.getItem('room');\r\n        this.coin = cc.sys.localStorage.getItem(\"coins\");\r\n        this.mute = cc.sys.localStorage.getItem(\"mute\");\r\n        this.signal = cc.sys.localStorage.getItem(\"signal\");\r\n        this.powerup = cc.sys.localStorage.getItem(\"powerup\");\r\n        this.data = 5;\r\n        this.update_coin();\r\n        this.update_data();\r\n        this.update_mute();\r\n        this.update_signal();\r\n        this.update_powerup();\r\n        this.playBGM();\r\n        if(_id == 1) this.id = 'creator';\r\n        else this.id = 'joiner';\r\n        this.dir = 0;\r\n        this.sec_list = [this.sec0, this.sec1, this.sec2, this.sec3, this.sec4,this.sec5,this.sec10,this.sec11,this.sec12,this.sec13,this.sec17,this.sec18,this.sec19];\r\n        this.score = 0;\r\n        console.log(\"joining as \" + this.id, this.room);\r\n        \r\n        //------------sparkle color------------------------\r\n        this.node.getChildByName(\"sparkle\").getComponent(cc.ParticleSystem).startColor= this.Color.node.color;\r\n        this.node.getChildByName(\"sparkle\").getComponent(cc.ParticleSystem).endColor= this.Color.node.color;\r\n        this.node.getChildByName(\"sparkle\").getComponent(cc.ParticleSystem).endColorVar= this.Color.node.color;\r\n        //-------------------------------------------------\r\n        this.check_mail();\r\n    }\r\n    playBGM(){ // @A@\r\n        cc.audioEngine.playMusic(this.multi_back_music, true); \r\n    }\r\n\r\n    update (dt) {\r\n        if(this.invis && !this.unhide){\r\n            if(!this.hidden){\r\n                var cl = new cc.Color(0, 0, 0);\r\n                this.Color.node.color = cl;\r\n            }else{\r\n                var cl = new cc.Color(0, 0, 0);\r\n                this.Color.node.color = cl.fromHEX(this.chameleon);\r\n            }\r\n            console.log(\"currently invisible\");\r\n        }\r\n        if(this.node.y <= -400){\r\n            // diee\r\n            // deploy white particles\r\n            this.die_particle();\r\n            this.loser();\r\n        }\r\n        this.camera_track();\r\n        if(!this.dead) this.node.x += this.dir * 250 * dt;\r\n        if(this.fly_state == 1){\r\n            this.node.x -= this.prev_dir * 0.4;\r\n            this.fly_state = -1;\r\n        }else if(this.stick){\r\n            // console.log(\"stick\");\r\n            this.node.x += this.prev_dir * 0.4;\r\n            this.stick = false;\r\n        }\r\n        this.node.scaleX = (this.dir >= 0) ? 1 : -1;\r\n        var dy = this.getComponent(cc.RigidBody).linearVelocity.y;\r\n        //----------sparkle emission rate is 0 when didnt move-----------------------------------------\r\n        if(this.dir!=0||dy>10) this.node.getChildByName(\"sparkle\").getComponent(cc.ParticleSystem).emissionRate=100;\r\n        else this.node.getChildByName(\"sparkle\").getComponent(cc.ParticleSystem).emissionRate=0;\r\n        //---------player spin---------------\r\n        if((dy > 10) && this.dir == 1) this.spin_right();\r\n        else if((dy > 10) && this.dir == -1) this.spin_left();\r\n        else if(this.node.angle != 0) this.node.angle=0;\r\n        //--------score-------------------------------\r\n        this.score = (Math.round(this.node.x / 35) > this.score) ? Math.round(this.node.x / 35) : this.score;\r\n        this.Score.getComponent(cc.Label).string = this.score.toString();\r\n        //--------------------------------------------\r\n    }\r\n    spin_right(){\r\n        this.node.angle -= 12;\r\n    }\r\n    spin_left(){\r\n        this.node.angle += 12;\r\n    }\r\n\r\n    camera_track(){\r\n        if(this.fly_state && !this.dir) return;\r\n\r\n        if(this.node.x < 100) this.camera.x = 0;\r\n        else this.camera.x = this.node.x - 100;\r\n    }\r\n\r\n    check_mail(){\r\n        if(!this.hiatus){\r\n            var ref = firebase.database().ref('in_game/' + this.room + '/' + this.id);\r\n\r\n            ref.once('value', (snapshot) => {\r\n                var rd = parseInt(snapshot.val());\r\n                console.log(\"read message value:\" + rd);\r\n                if(rd < -50){\r\n                    console.log(\"opponent has died, log scores\");\r\n                    firebase.database().ref('in_game/' + this.room + '/res').once('value', (snap) => {\r\n                        var self_score = this.score;\r\n                        var other_score = 0;\r\n                        console.log(this.id + \" logging scores\");\r\n                        firebase.database().ref('in_game/' + this.room + '/res/' + this.id + '_res').set(this.score, ()=>{\r\n                            if(!snap.child('joiner_res').exists() || !snap.child('creator_res').exists()) this.check_mail();\r\n\r\n                            if(this.id == 'creator') other_score = parseInt(snap.child('joiner_res').val());\r\n                            else other_score = parseInt(snap.child('creator_res').val());\r\n                            cc.sys.localStorage.setItem('multi_self', self_score);\r\n                            cc.sys.localStorage.setItem('multi_other', other_score);\r\n                            console.log(\"immediate values: \" + self_score, other_score);\r\n                            console.log(\"stored values: \" + cc.sys.localStorage.getItem('multi_self'), cc.sys.localStorage.getItem('multi_other'));\r\n                            cc.sys.localStorage.setItem(\"coins\", this.coin);\r\n                            cc.sys.localStorage.setItem(\"mute\", this.mute);\r\n                            cc.sys.localStorage.setItem(\"signal\", this.signal);\r\n                            if(self_score >= other_score){\r\n                                var explode=this.node.getChildByName(\"star_explode\");\r\n                                explode.active = true;\r\n                                explode.getComponent(cc.ParticleSystem).startColor = cc.color(0, 0, 0);\r\n                                explode.getComponent(cc.ParticleSystem).endColor = cc.color(229, 229, 22);\r\n                                explode.getComponent(cc.ParticleSystem).endColorVar = this.Color.node.color;\r\n                                this.scheduleOnce(() => {\r\n                                    cc.director.loadScene('multi_win');\r\n                                }, 0.3);\r\n                            }else{\r\n                                this.die_particle();\r\n                                this.scheduleOnce(() => {\r\n                                    cc.director.loadScene('multi_lose');\r\n                                }, 0.3);\r\n                            }\r\n                        });\r\n                    });\r\n                }else if(rd > 0){\r\n                    console.log(\"received message in game\");\r\n                    ref.set((rd-1), () => {\r\n                        this.check_mail();\r\n                    });\r\n                    if(!this.in_hiding){\r\n                        this.recv_msg++;\r\n                        console.log(\"messages left now \" + this.recv_msg);\r\n                        cc.audioEngine.playEffect(this.notif, false);\r\n                        this.Color.node.color = new cc.Color(255,255,255);\r\n                        this.unhide = true;\r\n                        this.hidden = false;\r\n                        this.scheduleOnce(() => {\r\n                            this.recv_msg--;\r\n                            console.log(\"visible time up, messages left: \" + this.recv_msg);\r\n                            if(!this.recv_msg){\r\n                                this.unhide = false;\r\n                                var color_str = this.color_list[this.base + this.color];\r\n                                var color = new cc.Color(255,255,255);\r\n                                this.Color.node.color = color.fromHEX(color_str);\r\n                            }\r\n                        }, 3);\r\n                    }\r\n                }else this.check_mail();\r\n            });\r\n        }else{\r\n            if(this.id == 'creator'){\r\n                firebase.database().ref('in_game/' + this.room + '/res/joiner_res').once('value', (snapshot)=>{\r\n                    if(snapshot.exists()){\r\n                        var self_score = this.score;\r\n                        var other_score = parseInt(snapshot.val());\r\n                        firebase.database().ref('in_game/' + this.room).remove();\r\n                        cc.sys.localStorage.setItem('multi_self', self_score);\r\n                        cc.sys.localStorage.setItem('multi_other', other_score);\r\n                        console.log(\"immediate values: \" + self_score, other_score);\r\n                        console.log(\"stored values: \" + cc.sys.localStorage.getItem('multi_self'), cc.sys.localStorage.getItem('multi_other'));\r\n                        cc.sys.localStorage.setItem(\"coins\", this.coin);\r\n                        cc.sys.localStorage.setItem(\"mute\", this.mute);\r\n                        cc.sys.localStorage.setItem(\"signal\", this.signal);\r\n                        if(self_score >= other_score) cc.director.loadScene('multi_win');\r\n                        else cc.director.loadScene('multi_lose');\r\n                    }else this.check_mail();\r\n                });\r\n            }else{\r\n                firebase.database().ref('in_game/' + this.room + '/res/creator_res').once('value', (snapshot)=>{\r\n                    if(snapshot.exists()){\r\n                        firebase.database().ref('in_game/' + this.room).remove();\r\n                        var self_score = this.score;\r\n                        var other_score = parseInt(snapshot.val());\r\n                        firebase.database().ref('in_game/' + this.room).remove();\r\n                        cc.sys.localStorage.setItem('multi_self', self_score);\r\n                        cc.sys.localStorage.setItem('multi_other', other_score);\r\n                        console.log(\"immediate values: \" + self_score, other_score);\r\n                        console.log(\"stored values: \" + cc.sys.localStorage.getItem('multi_self'), cc.sys.localStorage.getItem('multi_other'));\r\n                        cc.sys.localStorage.setItem(\"coins\", this.coin);\r\n                        cc.sys.localStorage.setItem(\"mute\", this.mute);\r\n                        cc.sys.localStorage.setItem(\"signal\", this.signal);\r\n                        if(self_score >= other_score) cc.director.loadScene('multi_win');\r\n                        else cc.director.loadScene('multi_lose');\r\n                    }else this.check_mail();\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    onKeyDown(event){\r\n        \r\n        if(event.keyCode == cc.macro.KEY.space){\r\n            if(this.on_floor) this.jump();\r\n        }\r\n        if(event.keyCode == cc.macro.KEY.left){\r\n            this.dir = -1;\r\n            this.prev_dir = this.dir;\r\n        }\r\n        else if(event.keyCode == cc.macro.KEY.right){\r\n            this.dir = 1;\r\n            this.prev_dir = this.dir;\r\n        }\r\n        \r\n        \r\n        if(event.keyCode == cc.macro.KEY.enter && this.data > 0){\r\n            this.Color.node.color = new cc.Color(255,255,255);\r\n            this.data--;\r\n            this.update_data();\r\n            // if id = 1 write to joiner, else write to creator\r\n            if(this.id == 'creator'){\r\n                // self is creator\r\n                firebase.database().ref('in_game/' + this.room + '/joiner').once('value', (snapshot)=>{\r\n                    var ping = parseInt(snapshot.val());\r\n                    firebase.database().ref('in_game/' + this.room + '/joiner').set(ping+1);\r\n                });\r\n            }else{\r\n                // self is joiner\r\n                firebase.database().ref('in_game/' + this.room + '/creator').once('value', (snapshot)=>{\r\n                    var ping = parseInt(snapshot.val());\r\n                    firebase.database().ref('in_game/' + this.room + '/creator').set(ping+1);\r\n                });\r\n            }\r\n            this.noisy++;\r\n            this.hidden = false;\r\n            var delay = 1 + Math.min(1.5, this.section_count/8);\r\n            if(this.on_boost) delay *= 0.3;\r\n            this.scheduleOnce(() => {\r\n                this.noisy--;\r\n                if(!this.noisy){\r\n                    var color_str = this.color_list[this.base + this.color];\r\n                    var color = new cc.Color(255,255,255);\r\n                    this.Color.node.color = color.fromHEX(color_str);\r\n                }\r\n            }, delay);\r\n        }\r\n        if((event.keyCode == cc.macro.KEY.r) && this.powerup > 0){ // ##\r\n            // use color powerup\r\n            var cl = this.Color.node.color;\r\n            this.invis = true;\r\n            this.powerup--;\r\n            this.update_powerup();\r\n            this.scheduleOnce(() => {\r\n                this.Color.node.color = cl;\r\n                this.invis = false;\r\n            }, 5);\r\n        }\r\n        if((event.keyCode == cc.macro.KEY.s) && this.signal > 0){ // ##\r\n            // use bubble signal\r\n            this.on_boost++;\r\n            this.signal_point.color = cc.color(26, 219, 34);\r\n            this.signal--;\r\n            this.update_signal();\r\n            this.scheduleOnce(()=>{\r\n                this.on_boost--;\r\n                if(!this.on_boost) this.signal_point.color = cc.color(255, 255, 255);\r\n            }, 5);\r\n        }\r\n        if((event.keyCode == cc.macro.KEY.f) && this.mute > 0){ // ##\r\n            // use bubble mute\r\n            this.in_hiding++;\r\n            this.mute_point.color = cc.color(26, 219, 34);\r\n            this.mute--;\r\n            this.update_mute();\r\n            this.scheduleOnce(()=>{\r\n                this.in_hiding--;\r\n                if(!this.in_hiding) this.mute_point.color = cc.color(255, 255, 255);\r\n            }, 5);\r\n        } \r\n\r\n\r\n    }\r\n    onKeyUp(event){\r\n        switch(event.keyCode){\r\n            case cc.macro.KEY.left:\r\n                this.dir = 0;\r\n                break;\r\n            case cc.macro.KEY.right:\r\n                this.dir = 0;               \r\n                break;\r\n        }\r\n    }\r\n\r\n    jump(){\r\n        cc.audioEngine.playEffect(this.player_jump, false); \r\n        this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 600);\r\n        this.fly_state = 1;\r\n        if(!this.debug_mode) this.on_floor = false;\r\n        // console.log(this.prev_dir + \"fly state: \" + this.fly_state);\r\n    }\r\n    update_coin(){  // @@ \r\n        this.coin_point.getComponent(cc.Label).string = this.coin.toString();\r\n    }\r\n    update_powerup(){  // @@ \r\n       this.bubble_powerup.getComponent(cc.Label).string = this.powerup.toString();\r\n    }\r\n    //losy\r\n    update_mute()\r\n    {\r\n        this.mute_point.getComponent(cc.Label).string = this.mute.toString();\r\n        \r\n    }\r\n    update_signal()\r\n    {\r\n        this.signal_point.getComponent(cc.Label).string = this.signal.toString();\r\n    }\r\n    update_data()\r\n    {\r\n        this.data_point.getComponent(cc.Label).string = this.data.toString();\r\n    }\r\n}\r\n"]}