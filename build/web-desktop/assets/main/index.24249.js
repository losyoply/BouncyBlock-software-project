window.__require=function e(t,o,c){function n(r,s){if(!o[r]){if(!t[r]){var a=r.split("/");if(a=a[a.length-1],!t[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var p=o[r]={exports:{}};t[r][0].call(p.exports,function(e){return n(t[r][1][e]||e)},p,p.exports,e,t,o,c)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<c.length;r++)n(c[r]);return n}({arm:[function(e,t,o){"use strict";cc._RF.push(t,"39f30jqkF9PyIAExa3ovAKr","arm");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.banana_Speed=100,t.anim=null,t.physicManager=null,t}return n(t,e),t.prototype.onLoad=function(){this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.physicManager.gravity=cc.v2(0,-500)},t.prototype.start=function(){this.anim=this.getComponent(cc.Animation)},t.prototype.onBeginContact=function(e,t,o){var c=this;"parent"==o.node.name&&("banana"==this.node.name?(this.node.y,this.anim.play("banana"),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(-this.banana_Speed,0),cc.audioEngine.playEffect(this.parent_step_on_banana,!1),setTimeout(function(){c.node.destroy()},1e3)):"lego"==this.node.name&&(this.anim.play("lego"),o.node.color=new cc.Color(127.5,127.5,127.5),cc.audioEngine.playEffect(this.step_on_lego,!1),setTimeout(function(){c.node.destroy()},1e3)))},i([a()],t.prototype,"banana_Speed",void 0),i([a(cc.AudioClip)],t.prototype,"parent_step_on_banana",void 0),i([a(cc.AudioClip)],t.prototype,"step_on_lego",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],bird_map_init:[function(e,t,o){"use strict";cc._RF.push(t,"77477pwviNK9rGDv30oF7rf","bird_map_init");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.BirdBase=void 0;var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.base=6,t.strip=1,t.coin=null,t}return n(t,e),t.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDrawBoundingBox=!0,cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-600)},t.prototype.onDestroy=function(){cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDebugDraw=!1,cc.director.getCollisionManager().enabledDrawBoundingBox=!1},t.prototype.start=function(){this.node.anchorX=0,this.node.anchorY=0;var e=this.node.getComponent(cc.TiledMap);this.strip=cc.find("Canvas/root").getComponent("root").color_strip,this.base=1+6*this.strip,(g=this.node.addComponent(cc.RigidBody)).type=cc.RigidBodyType.Static,g.fixedRotation=!0,(_=this.node.addComponent(cc.PhysicsBoxCollider)).offset=cc.v2(960,240),_.size=cc.size(5,1e3),_.sensor=!0,_.tag=1e3,_.apply();var t=e.getTileSize();console.log(t);var o=e.getLayer("ground"),c=o.getLayerSize();if("bird0"==this.node.name)for(var n=0;n<c.width;n++)for(var i=0;i<c.height;i++)0!=(v=o.getTiledTileAt(n,i,!0)).gid&&(v.node.group="ground",v.gid=this.base,(g=v.node.addComponent(cc.RigidBody)).type=cc.RigidBodyType.Static,g.fixedRotation=!0,(_=v.node.addComponent(cc.PhysicsBoxCollider)).offset=cc.v2(t.width/2,t.height/2),_.size=t,_.apply());else{for(n=0;n<c.width;n++)for(i=0;i<c.height;i++)(v=o.getTiledTileAt(n,i,!0)).gid=this.base;console.log("tile init complete, digging path(s)");var r=[2,17];for(n=0;n<c.width;n++){var s=Math.floor(3*Math.random()),a=Math.max(2,r[0]-s),l=Math.min(17,r[1]+s);s=Math.floor(3*Math.random());var p=Math.min(r[1]-s,r[0]+s),d=Math.max(r[0]+s,r[1]-s),h=Math.floor(Math.random()*(d-l))+l,u=Math.floor(Math.random()*(p-a))+a;h-u<4&&(h++,u--),console.log(u,h);for(var f=u;f<h;f++)o.getTiledTileAt(n,f,!0).gid=0;r[0]=u,r[1]=h}var y=cc.find("Canvas/root/bird_player").getComponent("bird_player").section_count;for(n=0;n<c.width;n++){for(i=0;i<c.height;i++){var g,_;0!=(v=o.getTiledTileAt(n,i,!0)).gid&&(v.node.group="ground",v.gid=this.base,(g=v.node.addComponent(cc.RigidBody)).type=cc.RigidBodyType.Static,g.fixedRotation=!0,(_=v.node.addComponent(cc.PhysicsBoxCollider)).offset=cc.v2(t.width/2,t.height/2),_.size=t,_.apply())}var m=5;for(i=3;i<c.height-3;i++){var v;if(0==(v=o.getTiledTileAt(n,i,!0)).gid){if(0!=o.getTiledTileAt(n,i-3,!0).gid)continue;if(Math.floor(8*Math.random())){if(0!=o.getTiledTileAt(n,i+3,!0).gid)break}else{m--;var b=cc.instantiate(this.coin);if(b.x=1920*y+v.node.x,b.y=v.node.y,console.log("coin at "+b.x,b.y),cc.find("Canvas/root/mapworld/coin_bubble").addChild(b),!m)break}}}}}},i([a(cc.Prefab)],t.prototype,"coin",void 0),i([s],t)}(cc.Component);o.BirdBase=l,cc._RF.pop()},{}],bird_player:[function(e,t,o){"use strict";cc._RF.push(t,"e8f78kelolP16GUSK4Ymy8r","bird_player");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Bird=void 0;var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.maplist=null,t.section=null,t.Score=null,t.Scoretag=null,t.Cointag=null,t.coin_point=null,t.Color=null,t.die_audio=null,t.player_jump=null,t.get_coin=null,t.bird_back_music=null,t.section_count=0,t.score=0,t.paused=!1,t.speed=150,t.coin=0,t.color=0,t.strip=0,t.base=0,t.last_x=0,t.color_list={7:"#2b3a67",8:"#496a81",9:"#66999b",10:"#b3af8f",11:"#ffc582",13:"#1c3144",14:"#596f62",15:"#7ea16b",16:"#c3d898",17:"#70161d",19:"#edebd3",20:"#edebd3",21:"#da4167",22:"#f4d35e",23:"#f78664",25:"#562c2c",26:"#f2542d",27:"#f5dfbb",28:"#0e9595",29:"#127474",31:"#8e9aaf",32:"#cbc0d3",33:"#efd3d7",34:"#feeafa",35:"#dee2ff"},t}return n(t,e),t.prototype.setcolor=function(){this.strip=cc.find("Canvas/root").getComponent("root").color_strip,this.base=6*this.strip,this.color=1+Math.floor(4*Math.random());var e=this.color_list[this.base+this.color],t=new cc.Color(255,255,255);this.Color.node.color=t.fromHEX(e)},t.prototype.onLoad=function(){cc.audioEngine.pauseMusic(),this.setcolor(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.section_count=0},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.start=function(){this.coin=cc.sys.localStorage.getItem("coins"),this.update_coin(),this.playBGM(),this.score=0},t.prototype.playBGM=function(){cc.audioEngine.playMusic(this.bird_back_music,!0)},t.prototype.update=function(e){this.camera_track(),this.node.x+=this.speed*e*Math.max(1,this.section_count/3),this.score=Math.round(this.node.x/35)>this.score?Math.round(this.node.x/35):this.score,this.Score.getComponent(cc.Label).string=this.score.toString()},t.prototype.camera_track=function(){this.Scoretag.x=Math.max(this.node.x-500,-389.764),this.Cointag.x=Math.max(this.node.x-320,-209.764),this.node.x<100?this.camera.x=0:this.camera.x=this.node.x-100},t.prototype.onBeginContact=function(e,t,o){var c=e.getWorldManifold().normal;if(1e3==o.tag){if(this.node.x>=1920*this.section_count){console.log("init next section"),this.speed*=1.1,this.section_count++;var n=cc.instantiate(this.section);n.x=1920*this.section_count,n.y=0,this.maplist.addChild(n)}}else"ground"==o.node.group||"mound"==o.node.group?(console.log(o.node.group+" ("+c.x+", "+c.y+")"),this.die_particle(),this.speed=0,cc.sys.localStorage.setItem("coins",this.coin),cc.sys.localStorage.setItem("nowscore",this.score),cc.sys.localStorage.setItem("nowscene","bird"),this.scheduleOnce(function(){cc.director.loadScene("lose")},.3)):"coin"==o.node.name&&(cc.audioEngine.playEffect(this.get_coin,!1),this.coin++,this.update_coin(),o.node.destroy())},t.prototype.die_particle=function(){cc.audioEngine.playEffect(this.die_audio,!1),this.node.getChildByName("eye").active=!1;var e=this.node.getChildByName("star_explode");e.active=!0,e.getComponent(cc.ParticleSystem).startColor=this.Color.node.color,e.getComponent(cc.ParticleSystem).endColor=this.Color.node.color,e.getComponent(cc.ParticleSystem).endColorVar=this.Color.node.color,this.node.getChildByName("color").active=!1},t.prototype.onKeyDown=function(e){e.keyCode==cc.macro.KEY.space&&this.jump(),e.keyCode==cc.macro.KEY.p&&(this.paused?(this.paused=!1,cc.audioEngine.resumeAll(),cc.director.resume()):(this.paused=!0,cc.audioEngine.pauseAll(),cc.director.pause()))},t.prototype.jump=function(){cc.audioEngine.playEffect(this.player_jump,!1),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,200)},t.prototype.update_coin=function(){this.coin_point.getComponent(cc.Label).string=this.coin.toString()},i([a(cc.Node)],t.prototype,"camera",void 0),i([a(cc.Node)],t.prototype,"maplist",void 0),i([a(cc.Prefab)],t.prototype,"section",void 0),i([a(cc.Node)],t.prototype,"Score",void 0),i([a(cc.Node)],t.prototype,"Scoretag",void 0),i([a(cc.Node)],t.prototype,"Cointag",void 0),i([a(cc.Node)],t.prototype,"coin_point",void 0),i([a(cc.Sprite)],t.prototype,"Color",void 0),i([a(cc.AudioClip)],t.prototype,"die_audio",void 0),i([a(cc.AudioClip)],t.prototype,"player_jump",void 0),i([a(cc.AudioClip)],t.prototype,"get_coin",void 0),i([a(cc.AudioClip)],t.prototype,"bird_back_music",void 0),i([s],t)}(cc.Component);o.Bird=l,cc._RF.pop()},{}],bubble_item_in_dayscene:[function(e,t,o){"use strict";cc._RF.push(t,"b2414Nfm2FM+LvC8kdiGMcR","bubble_item_in_dayscene");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bubble_Speed=50,t.physicManager=null,t}return n(t,e),t.prototype.onLoad=function(){this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.physicManager.gravity=cc.v2(0,-500),this.bubble_move(),this.print_bubble()},t.prototype.start=function(){this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(this.bubble_Speed,0)},t.prototype.bubble_move=function(){},t.prototype.print_bubble=function(){},t.prototype.update=function(){},i([a()],t.prototype,"bubble_Speed",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],bubble_item_in_multi:[function(e,t,o){"use strict";cc._RF.push(t,"bbf7ev4NwZJGL7yv3MkLzbV","bubble_item_in_multi");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bubble_num=0,t.bubble_Speed=0,t.physicManager=null,t}return n(t,e),t.prototype.onLoad=function(){this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.physicManager.gravity=cc.v2(0,-500),this.bubble_num=Math.floor(10*Math.random()),this.wander()},t.prototype.start=function(){this.bubble_Speed=10*Math.random()+20,this.wander()},t.prototype.wander=function(){cc.tween(this.node).repeatForever(cc.tween(this.node).by(1,{x:200}).by(1,{x:-200})).start()},t.prototype.onDestroy=function(){cc.director.getCollisionManager().enabled=!1},i([s],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],bubble_item:[function(e,t,o){"use strict";cc._RF.push(t,"ea24dvDShpMJLD9BwAs0/ri","bubble_item");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bubble_num=0,t.bubble_Speed=0,t.physicManager=null,t}return n(t,e),t.prototype.onLoad=function(){this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.physicManager.gravity=cc.v2(0,-500),this.bubble_num=Math.floor(3*Math.random()),this.wander()},t.prototype.start=function(){this.bubble_Speed=10*Math.random()+20,this.wander()},t.prototype.update=function(){},t.prototype.onDestroy=function(){cc.director.getCollisionManager().enabled=!1},t.prototype.wander=function(){cc.tween(this.node).repeatForever(cc.tween(this.node).by(1,{x:200}).by(1,{x:-200})).start()},i([s],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],"enemy moving sharp":[function(e,t,o){"use strict";cc._RF.push(t,"b8958wtIKZH/pz7sWUEkBOb","enemy moving sharp");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.now=null,t.next=null,t.physicManager=null,t}return n(t,e),t.prototype.onLoad=function(){this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.now="Up",this.next="DOWN"},t.prototype.start=function(){this.schedule(function(){this.changeState()},.5)},t.prototype.changeState=function(){switch(this.now){case"Init":this.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),"Up"==this.next?this.now="Down":this.now="Up";break;case"Down":this.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,-60),this.now="Init",this.next="Down";break;case"Up":this.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,60),this.now="Init",this.next="Up"}},t.prototype.onBeginContact=function(){},i([s],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],enemy_wrapper:[function(e,t,o){"use strict";cc._RF.push(t,"b7474pQMjlO57fgezzYOLXy","enemy_wrapper");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Light_wrapper=void 0;var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enemy=null,t.light=null,t.bullet=null,t.range=0,t.character=null,t.dir=1,t.scale_dir=1,t.leftbound=0,t.rightbound=0,t.atk=0,t.state=0,t}return n(t,e),t.prototype.onLoad=function(){this.character=cc.find("Canvas/root/player"),cc.director.getPhysicsManager().enabled=!0},t.prototype.start=function(){this.leftbound=-1*this.range*.8,this.rightbound=.8*this.range},t.prototype.update=function(e){if(0==this.state)this.enemy.x+=70*e*this.dir,this.enemy.x<=this.leftbound?this.dir=1:this.enemy.x>=this.rightbound&&(this.dir=-1),this.light.scaleX+=e*this.scale_dir,this.light.scaleX<-.15?this.scale_dir=.3:this.light.scaleX>=1.2&&(this.scale_dir=-.3);else if(1==this.state)this.atk=0;else if(2==this.state){var t=this.enemy.x+this.node.x;t>this.character.x+10?this.dir=-1:t<this.character.x-10?this.dir=1:this.dir=0,this.enemy.x+=170*e*this.dir,this.atk-=e,this.atk<0&&(this.shoot(),this.atk=.5)}this.light.x=this.enemy.x},t.prototype.shoot=function(){console.log("shooting");var e=cc.instantiate(this.bullet);this.node.addChild(e),e.setPosition(this.enemy.x,0),e.y-=10,e.getComponent(cc.RigidBody).linearVelocity=cc.v2(this.character.x-(this.enemy.x+this.node.x),this.character.y-this.node.y).normalizeSelf().multiply(cc.v2(700,700))},i([a(cc.Node)],t.prototype,"enemy",void 0),i([a(cc.Node)],t.prototype,"light",void 0),i([a(cc.Prefab)],t.prototype,"bullet",void 0),i([a],t.prototype,"range",void 0),i([s],t)}(cc.Component);o.Light_wrapper=l,cc._RF.pop()},{}],leader:[function(e,t,o){"use strict";cc._RF.push(t,"85c5c8PX5tGq4IWRK8+60WD","leader");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onload=function(){cc.debug.setDisplayStats(!1)},t.prototype.start=function(){cc.debug.setDisplayStats(!1);var e={1:{name:"",score:0},2:{name:"",score:0},3:{name:"",score:0},4:{name:"",score:0},5:{name:"",score:0}};firebase.database().ref("users").orderByKey().once("value").then(function(t){t.forEach(function(t){var o=t.val();if(o.highscore>0)for(var c=5;c>=1;c--)if(5==c&&(""==e[5].name||o.highscore>e[5].score))e[5].name=o.name,e[5].score=o.highscore;else if(""==e[c].name||o.highscore>e[c].score){var n=e[c];e[c]=e[c+1],e[c+1]=n}});for(var o=1;o<=5;o++)""==e[o].name?cc.find("Canvas/rank"+o.toString()).active=!1:(cc.find("Canvas/rank"+o.toString()).active=!0,cc.find("Canvas/rank"+o.toString()+"/name").getComponent(cc.Label).string=e[o].name,cc.find("Canvas/rank"+o.toString()+"/score").getComponent(cc.Label).string=e[o].score)});var t=new cc.Component.EventHandler;t.target=this.node,t.component="leader",t.handler="loadSignout",cc.find("Canvas/SignOut").getComponent(cc.Button).clickEvents.push(t)},t.prototype.loadSignout=function(){cc.director.loadScene("menu")},i([s],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],light:[function(e,t,o){"use strict";cc._RF.push(t,"46fe35ASG1DZ5runFzzwZXY","light");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Lightbeam=void 0;var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.character=null,t.bullet=null,t.alert_level=0,t.watch=!1,t.body=null,t.watch_x=0,t.watch_y=0,t.bottom=null,t.raise_timer=.5,t}return n(t,e),t.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,this.character=cc.find("Canvas/root/player"),this.bottom=this.node.getChildByName("bottom")},t.prototype.start=function(){this.alert_level=0,this.body=this.node.getParent(),this.watch=!1},t.prototype.onBeginContact=function(e,t,o){e.getWorldManifold().normal,"player"==o.node.name&&(15==t.tag&&1!=this.alert_level?(this.watch=!1,this.allclear()):(this.watch=!0,console.log("player entered watch frame")))},t.prototype.allclear=function(){this.alert_level=0,this.raise_timer=.5,this.node.getParent().getComponent("enemy_wrapper").state=0,console.log("nothing to see"),this.watch=!1},t.prototype.update=function(e){0==this.alert_level&&this.watch?this.character.getComponent("multi"==cc.director.getScene().name?"player_multi":"player").hidden||(this.alert_level=1,this.raise_timer=.5,console.log("player is being tracked"),this.node.getParent().getComponent("enemy_wrapper").state=this.alert_level):1==this.alert_level&&this.watch?(this.raise_timer-=e,this.node.scaleX<1.5&&(this.node.scaleX+=(1-this.raise_timer)/2),this.raise_timer<0&&(this.character.getComponent("multi"==cc.director.getScene().name?"player_multi":"player").hidden?(console.log("cease attack"),this.allclear()):(console.log("raise alert level to attack"),this.alert_level=2,this.node.getParent().getComponent("enemy_wrapper").state=2))):2==this.alert_level&&console.log(this.character.x>this.node.position.x)},i([a(cc.Prefab)],t.prototype,"bullet",void 0),i([s],t)}(cc.Component);o.Lightbeam=l,cc._RF.pop()},{}],loadgame:[function(e,t,o){"use strict";cc._RF.push(t,"a6bc9T7v/xKe7T03FjKa+s4","loadgame");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Loadscene=void 0;var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.start=function(){this.schedule(function(){var e=cc.find("Canvas/load_background/str").getComponent(cc.Label);e.string=e.string+"."},.3,2),this.scheduleOnce(function(){cc.director.loadScene("menu")},1),cc.sys.localStorage.setItem("uid","local"),cc.sys.localStorage.setItem("coins",0),cc.sys.localStorage.setItem("lego",0),cc.sys.localStorage.setItem("powerup",0),cc.sys.localStorage.setItem("banana",0),cc.sys.localStorage.setItem("mute",0),cc.sys.localStorage.setItem("signal",0),cc.sys.localStorage.setItem("highscore",0),cc.sys.localStorage.setItem("name",0),cc.sys.localStorage.setItem("email",0),cc.sys.localStorage.setItem("color","010000"),cc.sys.localStorage.setItem("nowcolor",1)},i([s],t)}(cc.Component));o.Loadscene=a,cc._RF.pop()},{}],lose_canvas:[function(e,t,o){"use strict";cc._RF.push(t,"e0977qYDkNHmZXrv09WzYJc","lose_canvas");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return n(t,e),t.prototype.start=function(){cc.audioEngine.stopAllEffects()},i([a(cc.Label)],t.prototype,"label",void 0),i([a],t.prototype,"text",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],lose:[function(e,t,o){"use strict";cc._RF.push(t,"c2affC6cylNr5t6u4Gjq4Sx","lose");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lose_back_music=null,t.uid=null,t.online=!1,t}return n(t,e),t.prototype.onload=function(){cc.audioEngine.pauseMusic()},t.prototype.start=function(){var e=this;firebase.auth().onAuthStateChanged(function(t){t&&(e.online=!0)}),this.uid=cc.sys.localStorage.getItem("uid"),console.log(this.uid),this.playBGM(),cc.debug.setDisplayStats(!1);var t=parseInt(cc.sys.localStorage.getItem("nowscore")),o=cc.sys.localStorage.getItem("nowscene"),c=parseInt(cc.sys.localStorage.getItem("highscore"));"local"!=this.uid&&"test"==o&&t>c&&firebase.database().ref("/users/"+this.uid+"/highscore").set(t,function(){cc.sys.localStorage.setItem("highscore",t),cc.find("Canvas/best").active=!0}),cc.find("score").getComponent(cc.Label).string=t.toString(),"local"!=this.uid&&(firebase.database().ref("/users/"+this.uid+"/coins").set(parseInt(cc.sys.localStorage.getItem("coins"))),firebase.database().ref("/users/"+this.uid+"/thing/lego").set(parseInt(cc.sys.localStorage.getItem("lego"))),firebase.database().ref("/users/"+this.uid+"/thing/powerup").set(parseInt(cc.sys.localStorage.getItem("powerup"))),firebase.database().ref("/users/"+this.uid+"/thing/banana").set(parseInt(cc.sys.localStorage.getItem("banana"))),firebase.database().ref("/users/"+this.uid+"/thing/mute").set(parseInt(cc.sys.localStorage.getItem("mute"))),firebase.database().ref("/users/"+this.uid+"/thing/signal").set(parseInt(cc.sys.localStorage.getItem("signal"))));var n=new cc.Component.EventHandler;n.target=this.node,n.component="lose",n.handler="loadmenu",cc.find("Canvas/menu").getComponent(cc.Button).clickEvents.push(n)},t.prototype.loadmenu=function(){cc.audioEngine.pauseMusic(),cc.director.loadScene("menu")},t.prototype.playBGM=function(){cc.audioEngine.playMusic(this.lose_back_music,!1)},i([a(cc.AudioClip)],t.prototype,"lose_back_music",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],menu:[function(e,t,o){"use strict";cc._RF.push(t,"1e31arRhgdHJrIQbqecYA4v","menu");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.menu_music=null,t}return n(t,e),t.prototype.onload=function(){cc.debug.setDisplayStats(!1)},t.prototype.playBGM=function(){cc.audioEngine.playMusic(this.menu_music,!0)},t.prototype.start=function(){cc.audioEngine.isMusicPlaying()||this.playBGM(),cc.debug.setDisplayStats(!1);var e=new cc.Component.EventHandler;e.target=this.node,e.component="menu",firebase.auth().onAuthStateChanged(function(t){if(t){e.handler="loadSignout";var o=firebase.auth().currentUser.uid;firebase.database().ref("users/"+o).once("value",function(e){var t=e.val();console.log(t),cc.sys.localStorage.setItem("uid",o),console.log("uid here ",cc.sys.localStorage.getItem("uid")),cc.sys.localStorage.setItem("coins",t.coins),cc.sys.localStorage.setItem("lego",t.thing.lego),cc.sys.localStorage.setItem("powerup",t.thing.powerup),cc.sys.localStorage.setItem("banana",t.thing.banana),cc.sys.localStorage.setItem("mute",t.thing.mute),cc.sys.localStorage.setItem("signal",t.thing.signal),cc.sys.localStorage.setItem("highscore",t.highscore),cc.sys.localStorage.setItem("name",t.name),cc.sys.localStorage.setItem("email",t.email),cc.find("Canvas/username").getComponent(cc.Label).string="Welcome, "+t.name;for(var c="0",n=1;n<=5;n++)t.thing.color[n]?c+="1":c+="0";cc.sys.localStorage.setItem("color",c)})}else cc.find("Canvas/username").active=!1,cc.find("Canvas/out").getComponent(cc.Label).string="sign in",cc.find("Canvas/SignOut").scaleX=-1,e.handler="loadSignIn"}),cc.find("Canvas/SignOut").getComponent(cc.Button).clickEvents.push(e);var t=new cc.Component.EventHandler;t.target=this.node,t.component="menu",t.handler="loadLeader",cc.find("Canvas/leaderboard").getComponent(cc.Button).clickEvents.push(t);var o=new cc.Component.EventHandler;o.target=this.node,o.component="menu",o.handler="loadNight",cc.find("Canvas/night").getComponent(cc.Button).clickEvents.push(o);var c=new cc.Component.EventHandler;c.target=this.node,c.component="menu",c.handler="loadDay",cc.find("Canvas/day").getComponent(cc.Button).clickEvents.push(c);var n=new cc.Component.EventHandler;n.target=this.node,n.component="menu",n.handler="loadMulti",cc.find("Canvas/multi").getComponent(cc.Button).clickEvents.push(n);var i=new cc.Component.EventHandler;i.target=this.node,i.component="menu",i.handler="loadBird",cc.find("Canvas/bird").getComponent(cc.Button).clickEvents.push(i);var r=new cc.Component.EventHandler;r.target=this.node,r.component="menu",r.handler="loadStore",cc.find("Canvas/store").getComponent(cc.Button).clickEvents.push(r);var s=new cc.Component.EventHandler;s.target=this.node,s.component="menu",s.handler="loadrule",cc.find("Canvas/rule").getComponent(cc.Button).clickEvents.push(s)},t.prototype.loadNight=function(){cc.director.loadScene("test")},t.prototype.loadDay=function(){cc.director.loadScene("day")},t.prototype.loadMulti=function(){cc.director.loadScene("multi_pairing")},t.prototype.loadBird=function(){cc.director.loadScene("bird")},t.prototype.loadSignout=function(){firebase.auth().signOut().then(function(){cc.director.loadScene("menu"),alert("You have been signed out.")}).catch(function(e){console.log(e.message)})},t.prototype.loadSignIn=function(){cc.director.loadScene("start")},t.prototype.loadLeader=function(){cc.director.loadScene("leader")},t.prototype.loadStore=function(){cc.director.loadScene("store")},t.prototype.loadrule=function(){cc.director.loadScene("tutorial")},i([a(cc.AudioClip)],t.prototype,"menu_music",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],missile:[function(e,t,o){"use strict";cc._RF.push(t,"ce3ddykci1AjY3lRk+k7SkP","missile");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Missile=void 0;var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tgt_x=0,t.tgt_y=0,t.player=null,t.explode=null,t.bulletFall=null,t}return n(t,e),t.prototype.onLoad=function(){this.player=cc.find("Canvas/root/player"),this.tgt_x=this.player.x,this.tgt_y=this.player.y},t.prototype.start=function(){this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).emissionRate=30,this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).startColor=cc.color(0,0,0),this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).endColor=cc.color(0,0,0),this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).endColorVar=cc.color(0,0,0)},t.prototype.onBeginContact=function(e,t,o){if("ground"==o.node.group||"mound"==o.node.group||"player"==o.node.name||"enemies"==o.node.name){var c=cc.instantiate(this.explode);c.x=this.node.x,c.y=this.node.y+180,cc.find("Canvas").addChild(c),this.node.active=!1,this.node.destroy()}"ground"!=o.node.group&&"mound"!=o.node.group||cc.audioEngine.playEffect(this.bulletFall,!1)},t.prototype.update=function(){this.node.y<-3500&&this.node.destroy()},i([a(cc.Prefab)],t.prototype,"explode",void 0),i([a(cc.AudioClip)],t.prototype,"bulletFall",void 0),i([s],t)}(cc.Component);o.Missile=l,cc._RF.pop()},{}],multi_res_lose:[function(e,t,o){"use strict";cc._RF.push(t,"95b01493m1EhI/sOoLxyS4X","multi_res_lose");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lose_back_music=null,t.uid=null,t}return n(t,e),t.prototype.onload=function(){cc.audioEngine.pauseMusic()},t.prototype.start=function(){var e=this;this.uid=cc.sys.localStorage.getItem("uid"),this.playBGM(),cc.debug.setDisplayStats(!1);var t=cc.sys.localStorage.getItem("multi_self"),o=cc.sys.localStorage.getItem("multi_other");cc.find("Canvas/multi_self").getComponent(cc.Label).string=t.toString(),cc.find("Canvas/multi_other").getComponent(cc.Label).string=o.toString(),console.log(t,o),firebase.database().ref("/users/"+this.uid+"/coins").set(parseInt(cc.sys.localStorage.getItem("coins"))),firebase.database().ref("/users/"+this.uid+"/thing/powerup").set(parseInt(cc.sys.localStorage.getItem("powerup"))),firebase.database().ref("/users/"+this.uid+"/thing/mute").set(parseInt(cc.sys.localStorage.getItem("mute"))),firebase.database().ref("/users/"+this.uid+"/thing/signal").set(parseInt(cc.sys.localStorage.getItem("signal"))),cc.find("Canvas/menu").on(cc.Node.EventType.MOUSE_DOWN,function(){e.loadmenu()},this)},t.prototype.loadmenu=function(){cc.audioEngine.pauseMusic(),cc.director.loadScene("menu")},t.prototype.playBGM=function(){cc.audioEngine.playMusic(this.lose_back_music,!1)},i([a(cc.AudioClip)],t.prototype,"lose_back_music",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],multi_res_win:[function(e,t,o){"use strict";cc._RF.push(t,"ddd621B4/5ES5vZuFCJiSEF","multi_res_win");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.win_music=null,t.uid=null,t}return n(t,e),t.prototype.onload=function(){cc.audioEngine.pauseMusic()},t.prototype.start=function(){var e=this;this.uid=cc.sys.localStorage.getItem("uid"),this.playBGM(),cc.debug.setDisplayStats(!1);var t=cc.sys.localStorage.getItem("multi_self"),o=cc.sys.localStorage.getItem("multi_other");cc.find("Canvas/multi_self").getComponent(cc.Label).string=t.toString(),cc.find("Canvas/multi_other").getComponent(cc.Label).string=o.toString(),console.log(t,o),firebase.database().ref("/users/"+this.uid+"/coins").set(parseInt(cc.sys.localStorage.getItem("coins"))),firebase.database().ref("/users/"+this.uid+"/thing/powerup").set(parseInt(cc.sys.localStorage.getItem("powerup"))),firebase.database().ref("/users/"+this.uid+"/thing/mute").set(parseInt(cc.sys.localStorage.getItem("mute"))),firebase.database().ref("/users/"+this.uid+"/thing/signal").set(parseInt(cc.sys.localStorage.getItem("signal"))),cc.find("Canvas/menu").on(cc.Node.EventType.MOUSE_DOWN,function(){e.loadmenu()},this)},t.prototype.loadmenu=function(){cc.audioEngine.pauseMusic(),cc.director.loadScene("menu")},t.prototype.playBGM=function(){cc.audioEngine.playMusic(this.win_music,!1)},i([a(cc.AudioClip)],t.prototype,"win_music",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],pair_game:[function(e,t,o){"use strict";cc._RF.push(t,"c676ei8t6JMzZCzLvA9kLsr","pair_game");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.invite_code=null,t.uid=null,t.kick=!1,t.key=null,t}return n(t,e),t.prototype.onLoad=function(){var e=this;cc.audioEngine.pauseMusic(),firebase.auth().onAuthStateChanged(function(t){t?console.log("logged in"):e.kick=!0})},t.prototype.start=function(){var e=this;this.uid=cc.sys.localStorage.getItem("uid"),this.key=this.uid.substring(0,5),cc.find("Canvas/root/Create").on(cc.Node.EventType.MOUSE_DOWN,function(){e.kick?(alert("Multiplayer is not accessible when you are not signed in."),cc.director.loadScene("menu")):e.makeGame()},this),cc.find("Canvas/root/Join").on(cc.Node.EventType.MOUSE_DOWN,function(){e.kick?(alert("Multiplayer is not accessible when you are not signed in."),cc.director.loadScene("menu")):e.joinGame()},this),cc.find("Canvas/root/back").on(cc.Node.EventType.MOUSE_DOWN,function(){firebase.database().ref("waiting_room/"+e.key).remove(),firebase.database().ref("in_game/"+e.uid).remove(),e.invite_code.string="",cc.director.loadScene("menu")},this)},t.prototype.makeGame=function(){this.invite_code.string=this.key,this.maker_load()},t.prototype.maker_load=function(){var e=this;console.log("maker called"),firebase.database().ref("waiting_room/"+this.key).once("value",function(t){if(console.log(t.val()),t.exists()){var o=t.val();firebase.database().ref("in_game/"+o+"/creator").set(0),firebase.database().ref("waiting_room/"+e.key).remove(),console.log("entering game as creator"),cc.sys.localStorage.setItem("id",1),cc.sys.localStorage.setItem("room",o),cc.director.loadScene("multi")}else e.maker_load()})},t.prototype.joinGame=function(){firebase.database().ref("waiting_room/"+this.invite_code.string).set(this.uid),this.joiner_load()},t.prototype.joiner_load=function(){var e=this;console.log("joiner called"),firebase.database().ref("in_game/"+this.uid).once("value",function(t){t.exists()?(console.log("creator has joined"),firebase.database().ref("in_game/"+e.uid+"/joiner").set(0),cc.sys.localStorage.setItem("id",0),cc.sys.localStorage.setItem("room",e.uid),cc.director.loadScene("multi")):e.joiner_load()})},i([a(cc.EditBox)],t.prototype,"invite_code",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],parent:[function(e,t,o){"use strict";cc._RF.push(t,"201d1+0To9E0LGUE/g+DzID","parent");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speedup=.7,t.stunned=0,t.penalty=0,t.animator=null,t}return n(t,e),t.prototype.onLoad=function(){this.animator=this.getComponent(cc.Animation),cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.before_x=this.node.x,this.footstep_id=cc.audioEngine.playEffect(this.footstep,!0),cc.audioEngine.setVolume(this.footstep_id,1)},t.prototype.onBeginContact=function(e,t,o){var c=this;e.getWorldManifold().normal,"lego"==o.node.name&&(this.stunned=1,this.animator.play("parent_stun"),setTimeout(function(){c.stunned=0,c.animator.play("parent_norm"),c.node.color=new cc.Color(255,255,255),c.penalty=220,c.scheduleOnce(function(){c.penalty=0},2)},4e3))},t.prototype.update=function(e){this.speedup=.3+.003*parseInt(this.now_score.string),this.stunned?this.node.x+=0:this.node.x+=Math.max(.32,(Math.min(300*this.speedup,250)+this.penalty)*e),Math.abs(this.node.x-this.before_x)<=.3&&0==this.stunned&&this.jump(),this.before_x=this.node.x;var t=680-(this.player.x-this.node.x);t>=0&&cc.audioEngine.setVolume(this.footstep_id,t/680)},t.prototype.start=function(){},t.prototype.jump=function(){this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,600)},i([a(cc.Label)],t.prototype,"now_score",void 0),i([a(cc.AudioClip)],t.prototype,"footstep",void 0),i([a(cc.Node)],t.prototype,"player",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],player_day:[function(e,t,o){"use strict";cc._RF.push(t,"30951GbWQNKHZLo+kLjQlFg","player_day");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Player=void 0;var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.maplist=null,t.sec0=null,t.sec1=null,t.sec2=null,t.sec3=null,t.sec4=null,t.sec5=null,t.sec6=null,t.sec7=null,t.sec8=null,t.sec9=null,t.sec10=null,t.sec11=null,t.sec12=null,t.sec13=null,t.sec14=null,t.sec15=null,t.sec16=null,t.sec17=null,t.sec18=null,t.sec19=null,t.sec20=null,t.Score=null,t.Color=null,t.coin_point=null,t.coin=0,t.bubble_banana=null,t.banana=0,t.bubble_lego=null,t.lego=0,t.banana_Prefabs=null,t.lego_Prefabs=null,t.player_jump=null,t.get_coin=null,t.get_B_L_bubble=null,t.get_powerup_bubble=null,t.put_bubble=null,t.sharp_knife=null,t.die_audio=null,t.day_back_music=null,t.debug_mode=!1,t.sec_list=[],t.paused=!1,t.dir=0,t.prev_dir=0,t.fly_state=0,t.on_floor=!0,t.stick=!1,t.stick2=!1,t.section_count=0,t.score=0,t.color=0,t.strip=0,t.base=0,t.last_x=0,t.color_list={7:"#2b3a67",8:"#496a81",9:"#66999b",10:"#b3af8f",11:"#ffc582",13:"#1c3144",14:"#596f62",15:"#7ea16b",16:"#c3d898",17:"#70161d",19:"#083e77",20:"#edebd3",21:"#da4167",22:"#f4d35e",23:"#f78664",25:"#562c2c",26:"#f2542d",27:"#f5dfbb",28:"#0e9595",29:"#127474",31:"#8e9aaf",32:"#cbc0d3",33:"#efd3d7",34:"#feeafa",35:"#dee2ff"},t}return n(t,e),t.prototype.setcolor=function(){this.strip=cc.find("Canvas/root").getComponent("root").color_strip,this.base=1+6*this.strip,this.color=1+Math.floor(4*Math.random());var e=this.color_list[this.base+this.color];console.log("color string: "+e);var t=new cc.Color(255,255,255);this.Color.node.color=t.fromHEX(e)},t.prototype.onLoad=function(){cc.audioEngine.pauseMusic(),this.setcolor(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.dir=0,this.section_count=0},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.onBeginContact=function(e,t,o){var c=e.getWorldManifold().normal;if(1e3==o.tag&&this.node.x>=1920*this.section_count){this.section_count++;var n=Math.floor(Math.random()*Math.min(2+3*this.section_count,21)),i=cc.instantiate(this.sec_list[n]);i.x=1920*this.section_count,i.y=0,this.maplist.addChild(i)}"ground"==o.node.group||"mound"==o.node.group?c.y&&-1==this.fly_state&&(this.stick=!0,this.fly_state=0,!this.on_floor&&c.y&&(this.on_floor=!0)):"coin"==o.node.group?(cc.audioEngine.playEffect(this.get_coin,!1),this.coin++,this.update_coin(),o.node.destroy()):"bubble"==o.node.group?1==o.tag?(cc.audioEngine.playEffect(this.get_B_L_bubble,!1),this.banana++,this.update_banana(),o.node.destroy()):2==o.tag&&(cc.audioEngine.playEffect(this.get_B_L_bubble,!1),this.lego++,this.update_lego(),o.node.destroy()):("s"==o.node.name[0]&&"h"==o.node.name[1]||"parent"==o.node.name||"spider"==o.node.name)&&("s"==o.node.name[0]&&cc.audioEngine.playEffect(this.sharp_knife,!1),this.die_particle(),this.loser())},t.prototype.die_particle=function(){cc.audioEngine.playEffect(this.die_audio,!1),this.node.getChildByName("eye").active=!1;var e=this.node.getChildByName("star_explode");e.active=!0,e.getComponent(cc.ParticleSystem).startColor=this.Color.node.color,e.getComponent(cc.ParticleSystem).endColor=this.Color.node.color,e.getComponent(cc.ParticleSystem).endColorVar=this.Color.node.color,this.node.getChildByName("color").active=!1},t.prototype.loser=function(){cc.sys.localStorage.setItem("coins",this.coin),cc.sys.localStorage.setItem("lego",this.lego),cc.sys.localStorage.setItem("banana",this.banana),cc.sys.localStorage.setItem("nowscore",this.score),cc.sys.localStorage.setItem("nowscene","day"),this.node.active=!1,this.scheduleOnce(function(){cc.director.loadScene("lose")},.3)},t.prototype.start=function(){this.coin=cc.sys.localStorage.getItem("coins"),this.lego=cc.sys.localStorage.getItem("lego"),this.banana=cc.sys.localStorage.getItem("banana"),this.update_coin(),this.update_lego(),this.update_banana(),this.dir=0,this.sec_list=[this.sec0,this.sec1,this.sec2,this.sec3,this.sec4,this.sec5,this.sec6,this.sec7,this.sec8,this.sec9,this.sec10,this.sec11,this.sec12,this.sec13,this.sec14,this.sec15,this.sec16,this.sec17,this.sec18,this.sec19,this.sec20],this.score=0,this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).startColor=this.Color.node.color,this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).endColor=this.Color.node.color,this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).endColorVar=this.Color.node.color,this.playBGM()},t.prototype.playBGM=function(){cc.audioEngine.playMusic(this.day_back_music,!0)},t.prototype.update=function(e){this.stick2&&(this.node.x-=.4*this.dir,this.dir=0,this.stick2=!1),this.node.active||(cc.sys.localStorage.setItem("coins",this.coin),cc.sys.localStorage.setItem("lego",this.lego),cc.sys.localStorage.setItem("banana",this.banana),cc.sys.localStorage.setItem("nowscore",this.score),cc.sys.localStorage.setItem("nowscene","test"),cc.director.loadScene("lose")),this.node.y<=-400&&this.loser(),this.camera_track(),this.node.x+=250*this.dir*e,1==this.fly_state?(this.node.x-=.4*this.prev_dir,this.fly_state=-1):this.stick&&(console.log("stick"),this.node.x+=.4*this.prev_dir,this.stick=!1),this.node.scaleX=this.dir>=0?1:-1;var t=this.getComponent(cc.RigidBody).linearVelocity.y;0!=this.dir||t>10?this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).emissionRate=100:this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).emissionRate=0,t>10&&1==this.dir?this.spin_right():t>10&&-1==this.dir?this.spin_left():0!=this.node.angle&&(this.node.angle=0),this.score=Math.round(this.node.x/35)>this.score?Math.round(this.node.x/35):this.score,this.Score.getComponent(cc.Label).string=this.score.toString()},t.prototype.spin_right=function(){this.node.angle-=12},t.prototype.spin_left=function(){this.node.angle+=12},t.prototype.camera_track=function(){this.fly_state&&!this.dir||(this.node.x<100?this.camera.x=0:this.camera.x=this.node.x-100)},t.prototype.onKeyDown=function(e){if(e.keyCode==cc.macro.KEY.space&&this.on_floor&&this.jump(),e.keyCode==cc.macro.KEY.left?(this.dir=-1,this.prev_dir=this.dir):e.keyCode==cc.macro.KEY.right&&(this.dir=1,this.prev_dir=this.dir),e.keyCode==cc.macro.KEY.p&&(this.paused?(this.paused=!1,cc.audioEngine.resumeAll(),cc.director.resume()):(this.paused=!0,cc.audioEngine.pauseAll(),cc.director.pause())),e.keyCode==cc.macro.KEY.e&&this.banana>0){cc.audioEngine.playEffect(this.put_bubble,!1);var t=cc.instantiate(this.banana_Prefabs);t.x=this.node.x,t.y=this.node.y,cc.find("Canvas/root").addChild(t),this.banana--,this.update_banana()}else if(e.keyCode==cc.macro.KEY.w&&this.lego>0){cc.audioEngine.playEffect(this.put_bubble,!1);var o=cc.instantiate(this.lego_Prefabs);o.x=this.node.x,o.y=this.node.y-1,cc.find("Canvas/root").addChild(o),this.lego--,this.update_lego()}},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.left:case cc.macro.KEY.right:this.dir=0}},t.prototype.jump=function(){cc.audioEngine.playEffect(this.player_jump,!1),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,600),this.fly_state=1,this.debug_mode||(this.on_floor=!1),console.log(this.prev_dir+"fly state: "+this.fly_state)},t.prototype.update_coin=function(){this.coin_point.getComponent(cc.Label).string=this.coin.toString()},t.prototype.update_banana=function(){this.bubble_banana.getComponent(cc.Label).string=this.banana.toString()},t.prototype.update_lego=function(){this.bubble_lego.getComponent(cc.Label).string=this.lego.toString()},i([a(cc.Node)],t.prototype,"camera",void 0),i([a(cc.Node)],t.prototype,"maplist",void 0),i([a(cc.Prefab)],t.prototype,"sec0",void 0),i([a(cc.Prefab)],t.prototype,"sec1",void 0),i([a(cc.Prefab)],t.prototype,"sec2",void 0),i([a(cc.Prefab)],t.prototype,"sec3",void 0),i([a(cc.Prefab)],t.prototype,"sec4",void 0),i([a(cc.Prefab)],t.prototype,"sec5",void 0),i([a(cc.Prefab)],t.prototype,"sec6",void 0),i([a(cc.Prefab)],t.prototype,"sec7",void 0),i([a(cc.Prefab)],t.prototype,"sec8",void 0),i([a(cc.Prefab)],t.prototype,"sec9",void 0),i([a(cc.Prefab)],t.prototype,"sec10",void 0),i([a(cc.Prefab)],t.prototype,"sec11",void 0),i([a(cc.Prefab)],t.prototype,"sec12",void 0),i([a(cc.Prefab)],t.prototype,"sec13",void 0),i([a(cc.Prefab)],t.prototype,"sec14",void 0),i([a(cc.Prefab)],t.prototype,"sec15",void 0),i([a(cc.Prefab)],t.prototype,"sec16",void 0),i([a(cc.Prefab)],t.prototype,"sec17",void 0),i([a(cc.Prefab)],t.prototype,"sec18",void 0),i([a(cc.Prefab)],t.prototype,"sec19",void 0),i([a(cc.Prefab)],t.prototype,"sec20",void 0),i([a(cc.Node)],t.prototype,"Score",void 0),i([a(cc.Sprite)],t.prototype,"Color",void 0),i([a(cc.Node)],t.prototype,"coin_point",void 0),i([a(cc.Node)],t.prototype,"bubble_banana",void 0),i([a(cc.Node)],t.prototype,"bubble_lego",void 0),i([a(cc.Prefab)],t.prototype,"banana_Prefabs",void 0),i([a(cc.Prefab)],t.prototype,"lego_Prefabs",void 0),i([a(cc.AudioClip)],t.prototype,"player_jump",void 0),i([a(cc.AudioClip)],t.prototype,"get_coin",void 0),i([a(cc.AudioClip)],t.prototype,"get_B_L_bubble",void 0),i([a(cc.AudioClip)],t.prototype,"get_powerup_bubble",void 0),i([a(cc.AudioClip)],t.prototype,"put_bubble",void 0),i([a(cc.AudioClip)],t.prototype,"sharp_knife",void 0),i([a(cc.AudioClip)],t.prototype,"die_audio",void 0),i([a(cc.AudioClip)],t.prototype,"day_back_music",void 0),i([s],t)}(cc.Component);o.Player=l,cc._RF.pop()},{}],player_multi:[function(e,t,o){"use strict";cc._RF.push(t,"a4ea1af56VI/qdqP2nSLwou","player_multi");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Player=void 0;var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.maplist=null,t.sec0=null,t.sec1=null,t.sec2=null,t.sec3=null,t.sec4=null,t.sec5=null,t.sec6=null,t.sec7=null,t.sec8=null,t.sec9=null,t.sec10=null,t.sec11=null,t.sec12=null,t.sec13=null,t.sec14=null,t.sec15=null,t.sec16=null,t.sec17=null,t.sec18=null,t.sec19=null,t.sec20=null,t.Score=null,t.Color=null,t.notif=null,t.coin_point=null,t.coin=0,t.player_jump=null,t.get_coin=null,t.bubble_powerup=null,t.powerup=0,t.die_audio=null,t.get_powerup_bubble=null,t.sharp_knife=null,t.shooted=null,t.multi_back_music=null,t.data_point=null,t.signal_point=null,t.mute_point=null,t.debug_mode=!1,t.hidden=!1,t.noisy=0,t.unhide=!1,t.recv_msg=0,t.data=0,t.mute=0,t.in_hiding=0,t.signal=0,t.on_boost=0,t.sec_list=[],t.dead=!1,t.dir=0,t.prev_dir=0,t.fly_state=0,t.on_floor=!0,t.stick=!1,t.invis=!1,t.chameleon=null,t.id=null,t.room=null,t.section_count=0,t.score=0,t.hiatus=!1,t.color=0,t.strip=0,t.base=0,t.last_x=0,t.color_list={7:"#2b3a67",8:"#496a81",9:"#66999b",10:"#b3af8f",11:"#ffc582",13:"#1c3144",14:"#596f62",15:"#7ea16b",16:"#c3d898",17:"#70161d",19:"#083e77",20:"#edebd3",21:"#da4167",22:"#f4d35e",23:"#f78664",25:"#562c2c",26:"#f2542d",27:"#f5dfbb",28:"#0e9595",29:"#127474",31:"#8e9aaf",32:"#cbc0d3",33:"#efd3d7",34:"#feeafa",35:"#dee2ff"},t}return n(t,e),t.prototype.setcolor=function(){this.strip=cc.find("Canvas/root").getComponent("root").color_strip,this.base=1+6*this.strip,this.color=1+Math.floor(4*Math.random());var e=this.color_list[this.base+this.color],t=new cc.Color(255,255,255);this.Color.node.color=t.fromHEX(e)},t.prototype.onLoad=function(){cc.audioEngine.pauseMusic(),this.setcolor(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.dir=0,this.section_count=0},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.onBeginContact=function(e,t,o){var c=e.getWorldManifold().normal;if(1e3==o.tag){if(this.node.x>=1920*this.section_count){this.section_count++;var n=Math.floor(Math.random()*Math.min(2+3*this.section_count,21)),i=cc.instantiate(this.sec_list[n]);i.x=1920*this.section_count,i.y=0,this.maplist.addChild(i)}}else"ground"==o.node.group||"mound"==o.node.group?(c.y&&-1==this.fly_state&&(this.stick=!0,this.fly_state=0,!this.on_floor&&c.y&&(this.on_floor=!0)),"mound"==o.node.group&&(!(o.node.getComponent(cc.TiledTile).gid==this.color+this.base&&c.x||this.invis)||this.noisy||this.unhide||(this.node.getChildByName("eye").active=!1,this.hidden=!0,this.invis&&(this.chameleon=this.color_list[o.node.getComponent(cc.TiledTile).gid])))):"coin"==o.node.group?(cc.audioEngine.playEffect(this.get_coin,!1),this.coin++,this.update_coin(),o.node.destroy()):"bubble"==o.node.group?3==o.tag?(cc.audioEngine.playEffect(this.get_powerup_bubble,!1),this.powerup++,this.update_powerup(),o.node.destroy()):4==o.tag?(this.mute++,this.update_mute(),o.node.destroy()):5==o.tag?(this.signal++,this.update_signal(),o.node.destroy(),o.node.destroy()):6==o.tag&&(this.data++,this.update_data(),o.node.destroy()):"missile"==o.node.name?(cc.audioEngine.playEffect(this.shooted,!1),this.die_particle(),this.loser()):("s"==o.node.name[0]&&"h"==o.node.name[1]||"spider"==o.node.name)&&("s"==o.node.name[0]&&cc.audioEngine.playEffect(this.sharp_knife,!1),this.die_particle(),this.loser())},t.prototype.die_particle=function(){cc.audioEngine.playEffect(this.die_audio,!1),this.node.getChildByName("eye").active=!1;var e=this.node.getChildByName("star_explode");e.active=!0,e.getComponent(cc.ParticleSystem).startColor=this.Color.node.color,e.getComponent(cc.ParticleSystem).endColor=this.Color.node.color,e.getComponent(cc.ParticleSystem).endColorVar=this.Color.node.color,this.node.getChildByName("color").active=!1},t.prototype.loser=function(){var e=this;this.dead=!0,"creator"==this.id?firebase.database().ref("in_game/"+this.room+"/res/creator_res").set(this.score,function(){firebase.database().ref("in_game/"+e.room+"/joiner").set(-100,function(){e.hiatus=!0,e.check_mail()})}):firebase.database().ref("in_game/"+this.room+"/res/joiner_res").set(this.score,function(){firebase.database().ref("in_game/"+e.room+"/creator").set(-100,function(){e.hiatus=!0,e.check_mail()})})},t.prototype.onEndContact=function(e,t,o){0!=this.getComponent(cc.RigidBody).linearVelocity.y?(this.node.getChildByName("eye").active=!0,this.hidden=!1):"mound"==o.node.group&&(this.node.getChildByName("eye").active=!0,this.hidden=!1)},t.prototype.start=function(){var e=parseInt(cc.sys.localStorage.getItem("id"));this.room=cc.sys.localStorage.getItem("room"),this.coin=cc.sys.localStorage.getItem("coins"),this.mute=cc.sys.localStorage.getItem("mute"),this.signal=cc.sys.localStorage.getItem("signal"),this.powerup=cc.sys.localStorage.getItem("powerup"),this.data=5,this.update_coin(),this.update_data(),this.update_mute(),this.update_signal(),this.update_powerup(),this.playBGM(),this.id=1==e?"creator":"joiner",this.dir=0,this.sec_list=[this.sec0,this.sec1,this.sec2,this.sec3,this.sec4,this.sec5,this.sec10,this.sec11,this.sec12,this.sec13,this.sec17,this.sec18,this.sec19],this.score=0,console.log("joining as "+this.id,this.room),this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).startColor=this.Color.node.color,this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).endColor=this.Color.node.color,this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).endColorVar=this.Color.node.color,this.check_mail()},t.prototype.playBGM=function(){cc.audioEngine.playMusic(this.multi_back_music,!0)},t.prototype.update=function(e){if(this.invis&&!this.unhide){if(this.hidden)t=new cc.Color(0,0,0),this.Color.node.color=t.fromHEX(this.chameleon);else{var t=new cc.Color(0,0,0);this.Color.node.color=t}console.log("currently invisible")}this.node.y<=-400&&(this.die_particle(),this.loser()),this.camera_track(),this.dead||(this.node.x+=250*this.dir*e),1==this.fly_state?(this.node.x-=.4*this.prev_dir,this.fly_state=-1):this.stick&&(this.node.x+=.4*this.prev_dir,this.stick=!1),this.node.scaleX=this.dir>=0?1:-1;var o=this.getComponent(cc.RigidBody).linearVelocity.y;0!=this.dir||o>10?this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).emissionRate=100:this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).emissionRate=0,o>10&&1==this.dir?this.spin_right():o>10&&-1==this.dir?this.spin_left():0!=this.node.angle&&(this.node.angle=0),this.score=Math.round(this.node.x/35)>this.score?Math.round(this.node.x/35):this.score,this.Score.getComponent(cc.Label).string=this.score.toString()},t.prototype.spin_right=function(){this.node.angle-=12},t.prototype.spin_left=function(){this.node.angle+=12},t.prototype.camera_track=function(){this.fly_state&&!this.dir||(this.node.x<100?this.camera.x=0:this.camera.x=this.node.x-100)},t.prototype.check_mail=function(){var e=this;if(this.hiatus)"creator"==this.id?firebase.database().ref("in_game/"+this.room+"/res/joiner_res").once("value",function(t){if(t.exists()){var o=e.score,c=parseInt(t.val());firebase.database().ref("in_game/"+e.room).remove(),cc.sys.localStorage.setItem("multi_self",o),cc.sys.localStorage.setItem("multi_other",c),console.log("immediate values: "+o,c),console.log("stored values: "+cc.sys.localStorage.getItem("multi_self"),cc.sys.localStorage.getItem("multi_other")),cc.sys.localStorage.setItem("coins",e.coin),cc.sys.localStorage.setItem("mute",e.mute),cc.sys.localStorage.setItem("signal",e.signal),o>=c?cc.director.loadScene("multi_win"):cc.director.loadScene("multi_lose")}else e.check_mail()}):firebase.database().ref("in_game/"+this.room+"/res/creator_res").once("value",function(t){if(t.exists()){firebase.database().ref("in_game/"+e.room).remove();var o=e.score,c=parseInt(t.val());firebase.database().ref("in_game/"+e.room).remove(),cc.sys.localStorage.setItem("multi_self",o),cc.sys.localStorage.setItem("multi_other",c),console.log("immediate values: "+o,c),console.log("stored values: "+cc.sys.localStorage.getItem("multi_self"),cc.sys.localStorage.getItem("multi_other")),cc.sys.localStorage.setItem("coins",e.coin),cc.sys.localStorage.setItem("mute",e.mute),cc.sys.localStorage.setItem("signal",e.signal),o>=c?cc.director.loadScene("multi_win"):cc.director.loadScene("multi_lose")}else e.check_mail()});else{var t=firebase.database().ref("in_game/"+this.room+"/"+this.id);t.once("value",function(o){var c=parseInt(o.val());console.log("read message value:"+c),c<-50?(console.log("opponent has died, log scores"),firebase.database().ref("in_game/"+e.room+"/res").once("value",function(t){var o=e.score,c=0;console.log(e.id+" logging scores"),firebase.database().ref("in_game/"+e.room+"/res/"+e.id+"_res").set(e.score,function(){if(t.child("joiner_res").exists()&&t.child("creator_res").exists()||e.check_mail(),c="creator"==e.id?parseInt(t.child("joiner_res").val()):parseInt(t.child("creator_res").val()),cc.sys.localStorage.setItem("multi_self",o),cc.sys.localStorage.setItem("multi_other",c),console.log("immediate values: "+o,c),console.log("stored values: "+cc.sys.localStorage.getItem("multi_self"),cc.sys.localStorage.getItem("multi_other")),cc.sys.localStorage.setItem("coins",e.coin),cc.sys.localStorage.setItem("mute",e.mute),cc.sys.localStorage.setItem("signal",e.signal),o>=c){var n=e.node.getChildByName("star_explode");n.active=!0,n.getComponent(cc.ParticleSystem).startColor=cc.color(0,0,0),n.getComponent(cc.ParticleSystem).endColor=cc.color(229,229,22),n.getComponent(cc.ParticleSystem).endColorVar=e.Color.node.color,e.scheduleOnce(function(){cc.director.loadScene("multi_win")},.3)}else e.die_particle(),e.scheduleOnce(function(){cc.director.loadScene("multi_lose")},.3)})})):c>0?(console.log("received message in game"),t.set(c-1,function(){e.check_mail()}),e.in_hiding||(e.recv_msg++,console.log("messages left now "+e.recv_msg),cc.audioEngine.playEffect(e.notif,!1),e.Color.node.color=new cc.Color(255,255,255),e.unhide=!0,e.hidden=!1,e.scheduleOnce(function(){if(e.recv_msg--,console.log("visible time up, messages left: "+e.recv_msg),!e.recv_msg){e.unhide=!1;var t=e.color_list[e.base+e.color],o=new cc.Color(255,255,255);e.Color.node.color=o.fromHEX(t)}},3))):e.check_mail()})}},t.prototype.onKeyDown=function(e){var t=this;if(e.keyCode==cc.macro.KEY.space&&this.on_floor&&this.jump(),e.keyCode==cc.macro.KEY.left?(this.dir=-1,this.prev_dir=this.dir):e.keyCode==cc.macro.KEY.right&&(this.dir=1,this.prev_dir=this.dir),e.keyCode==cc.macro.KEY.enter&&this.data>0){this.Color.node.color=new cc.Color(255,255,255),this.data--,this.update_data(),"creator"==this.id?firebase.database().ref("in_game/"+this.room+"/joiner").once("value",function(e){var o=parseInt(e.val());firebase.database().ref("in_game/"+t.room+"/joiner").set(o+1)}):firebase.database().ref("in_game/"+this.room+"/creator").once("value",function(e){var o=parseInt(e.val());firebase.database().ref("in_game/"+t.room+"/creator").set(o+1)}),this.noisy++,this.hidden=!1;var o=1+Math.min(1.5,this.section_count/8);this.on_boost&&(o*=.3),this.scheduleOnce(function(){if(t.noisy--,!t.noisy){var e=t.color_list[t.base+t.color],o=new cc.Color(255,255,255);t.Color.node.color=o.fromHEX(e)}},o)}if(e.keyCode==cc.macro.KEY.r&&this.powerup>0){var c=this.Color.node.color;this.invis=!0,this.powerup--,this.update_powerup(),this.scheduleOnce(function(){t.Color.node.color=c,t.invis=!1},5)}e.keyCode==cc.macro.KEY.s&&this.signal>0&&(this.on_boost++,this.signal_point.color=cc.color(26,219,34),this.signal--,this.update_signal(),this.scheduleOnce(function(){t.on_boost--,t.on_boost||(t.signal_point.color=cc.color(255,255,255))},5)),e.keyCode==cc.macro.KEY.f&&this.mute>0&&(this.in_hiding++,this.mute_point.color=cc.color(26,219,34),this.mute--,this.update_mute(),this.scheduleOnce(function(){t.in_hiding--,t.in_hiding||(t.mute_point.color=cc.color(255,255,255))},5))},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.left:case cc.macro.KEY.right:this.dir=0}},t.prototype.jump=function(){cc.audioEngine.playEffect(this.player_jump,!1),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,600),this.fly_state=1,this.debug_mode||(this.on_floor=!1)},t.prototype.update_coin=function(){this.coin_point.getComponent(cc.Label).string=this.coin.toString()},t.prototype.update_powerup=function(){this.bubble_powerup.getComponent(cc.Label).string=this.powerup.toString()},t.prototype.update_mute=function(){this.mute_point.getComponent(cc.Label).string=this.mute.toString()},t.prototype.update_signal=function(){this.signal_point.getComponent(cc.Label).string=this.signal.toString()},t.prototype.update_data=function(){this.data_point.getComponent(cc.Label).string=this.data.toString()},i([a(cc.Node)],t.prototype,"camera",void 0),i([a(cc.Node)],t.prototype,"maplist",void 0),i([a(cc.Prefab)],t.prototype,"sec0",void 0),i([a(cc.Prefab)],t.prototype,"sec1",void 0),i([a(cc.Prefab)],t.prototype,"sec2",void 0),i([a(cc.Prefab)],t.prototype,"sec3",void 0),i([a(cc.Prefab)],t.prototype,"sec4",void 0),i([a(cc.Prefab)],t.prototype,"sec5",void 0),i([a(cc.Prefab)],t.prototype,"sec6",void 0),i([a(cc.Prefab)],t.prototype,"sec7",void 0),i([a(cc.Prefab)],t.prototype,"sec8",void 0),i([a(cc.Prefab)],t.prototype,"sec9",void 0),i([a(cc.Prefab)],t.prototype,"sec10",void 0),i([a(cc.Prefab)],t.prototype,"sec11",void 0),i([a(cc.Prefab)],t.prototype,"sec12",void 0),i([a(cc.Prefab)],t.prototype,"sec13",void 0),i([a(cc.Prefab)],t.prototype,"sec14",void 0),i([a(cc.Prefab)],t.prototype,"sec15",void 0),i([a(cc.Prefab)],t.prototype,"sec16",void 0),i([a(cc.Prefab)],t.prototype,"sec17",void 0),i([a(cc.Prefab)],t.prototype,"sec18",void 0),i([a(cc.Prefab)],t.prototype,"sec19",void 0),i([a(cc.Prefab)],t.prototype,"sec20",void 0),i([a(cc.Node)],t.prototype,"Score",void 0),i([a(cc.Sprite)],t.prototype,"Color",void 0),i([a(cc.AudioClip)],t.prototype,"notif",void 0),i([a(cc.Node)],t.prototype,"coin_point",void 0),i([a(cc.AudioClip)],t.prototype,"player_jump",void 0),i([a(cc.AudioClip)],t.prototype,"get_coin",void 0),i([a(cc.Node)],t.prototype,"bubble_powerup",void 0),i([a(cc.AudioClip)],t.prototype,"die_audio",void 0),i([a(cc.AudioClip)],t.prototype,"get_powerup_bubble",void 0),i([a(cc.AudioClip)],t.prototype,"sharp_knife",void 0),i([a(cc.AudioClip)],t.prototype,"shooted",void 0),i([a(cc.AudioClip)],t.prototype,"multi_back_music",void 0),i([a(cc.Node)],t.prototype,"data_point",void 0),i([a(cc.Node)],t.prototype,"signal_point",void 0),i([a(cc.Node)],t.prototype,"mute_point",void 0),i([s],t)}(cc.Component);o.Player=l,cc._RF.pop()},{}],player:[function(e,t,o){"use strict";cc._RF.push(t,"a4fb5zoFvJOybdzPXDOd6jk","player");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Player=void 0;var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.maplist=null,t.sec0=null,t.sec1=null,t.sec2=null,t.sec3=null,t.sec4=null,t.sec5=null,t.sec6=null,t.sec7=null,t.sec8=null,t.sec9=null,t.sec10=null,t.sec11=null,t.sec12=null,t.sec13=null,t.sec14=null,t.sec15=null,t.sec16=null,t.sec17=null,t.sec18=null,t.sec19=null,t.sec20=null,t.Score=null,t.Color=null,t.coin_point=null,t.coin=0,t.lego=0,t.banana=0,t.powerup=0,t.mute=0,t.signal=0,t.color_avail={1:!0,2:!1,3:!1,4:!1,5:!1},t.bubble_powerup=null,t.player_jump=null,t.get_coin=null,t.die_audio=null,t.sharp_knife=null,t.get_powerup_bubble=null,t.shooted=null,t.night_back_music=null,t.debug_mode=!1,t.hidden=!1,t.sec_list=[],t.paused=!1,t.dir=0,t.prev_dir=0,t.fly_state=0,t.on_floor=!0,t.stick=!1,t.invis=!1,t.chameleon=null,t.section_count=0,t.score=0,t.color=0,t.strip=0,t.base=0,t.last_x=0,t.color_list={7:"#2b3a67",8:"#496a81",9:"#66999b",10:"#b3af8f",11:"#ffc582",13:"#1c3144",14:"#596f62",15:"#7ea16b",16:"#c3d898",17:"#70161d",19:"#083e77",20:"#edebd3",21:"#da4167",22:"#f4d35e",23:"#f78664",25:"#562c2c",26:"#f2542d",27:"#f5dfbb",28:"#0e9595",29:"#127474",31:"#8e9aaf",32:"#cbc0d3",33:"#efd3d7",34:"#feeafa",35:"#dee2ff"},t}return n(t,e),t.prototype.setcolor=function(){this.strip=cc.find("Canvas/root").getComponent("root").color_strip,this.base=1+6*this.strip,this.color=1+Math.floor(4*Math.random());var e=this.color_list[this.base+this.color],t=new cc.Color(255,255,255);this.Color.node.color=t.fromHEX(e)},t.prototype.onLoad=function(){cc.audioEngine.pauseMusic(),this.setcolor(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.dir=0,this.section_count=0;for(var e=cc.sys.localStorage.getItem("color").split(""),t=1;t<=5;t++)this.color_avail[t]=parseInt(e[t])},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.onBeginContact=function(e,t,o){var c=e.getWorldManifold().normal;if(1e3==o.tag&&this.node.x>=1920*this.section_count){this.section_count++;var n=Math.floor(Math.random()*Math.min(2+3*this.section_count,21)),i=cc.instantiate(this.sec_list[n]);i.x=1920*this.section_count,i.y=0,this.maplist.addChild(i)}"ground"==o.node.group||"mound"==o.node.group?(console.log(o.node.group+" ("+c.x+", "+c.y+")"),c.y&&-1==this.fly_state&&(this.stick=!0,this.fly_state=0,!this.on_floor&&c.y&&(this.on_floor=!0)),"mound"==o.node.group&&(o.node.getComponent(cc.TiledTile).gid==this.color+this.base&&c.x||this.invis)&&(this.node.getChildByName("eye").active=!1,this.hidden=!0,this.invis&&(this.chameleon=this.color_list[o.node.getComponent(cc.TiledTile).gid]))):"coin"==o.node.group?(cc.audioEngine.playEffect(this.get_coin,!1),this.coin++,this.update_coin(),o.node.destroy()):"bubble"==o.node.group?3==o.tag&&(cc.audioEngine.playEffect(this.get_powerup_bubble,!1),this.powerup++,this.update_powerup(),o.node.destroy()):"missile"==o.node.name?(cc.audioEngine.playEffect(this.shooted,!1),this.die_particle(),this.loser()):("s"==o.node.name[0]&&"h"==o.node.name[1]||"spider"==o.node.name)&&("s"==o.node.name[0]&&cc.audioEngine.playEffect(this.sharp_knife,!1),this.die_particle(),this.loser())},t.prototype.die_particle=function(){this.node.getChildByName("eye").active=!1;var e=this.node.getChildByName("star_explode");e.active=!0,e.getComponent(cc.ParticleSystem).startColor=this.Color.node.color,e.getComponent(cc.ParticleSystem).endColor=this.Color.node.color,e.getComponent(cc.ParticleSystem).endColorVar=this.Color.node.color,this.node.getChildByName("color").active=!1},t.prototype.loser=function(){this.unscheduleAllCallbacks(),console.log("you died"),cc.sys.localStorage.setItem("coins",this.coin),cc.sys.localStorage.setItem("powerup",this.powerup),cc.sys.localStorage.setItem("nowscore",this.score),cc.sys.localStorage.setItem("nowscene","test"),this.node.active=!1,this.scheduleOnce(function(){cc.director.loadScene("lose")},.3)},t.prototype.onEndContact=function(e,t,o){0!=this.getComponent(cc.RigidBody).linearVelocity.y?(this.node.getChildByName("eye").active=!0,this.hidden=!1):"mound"==o.node.group&&(this.node.getChildByName("eye").active=!0,this.hidden=!1)},t.prototype.playBGM=function(){cc.audioEngine.playMusic(this.night_back_music,!0)},t.prototype.start=function(){this.coin=cc.sys.localStorage.getItem("coins"),this.powerup=cc.sys.localStorage.getItem("powerup"),this.update_coin(),this.update_powerup(),this.playBGM(),this.dir=0,this.sec_list=[this.sec0,this.sec1,this.sec2,this.sec3,this.sec4,this.sec5,this.sec6,this.sec7,this.sec8,this.sec9,this.sec10,this.sec11,this.sec12,this.sec13,this.sec14,this.sec15,this.sec16,this.sec17,this.sec18,this.sec19,this.sec20],this.score=0,this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).startColor=this.Color.node.color,this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).endColor=this.Color.node.color,this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).endColorVar=this.Color.node.color},t.prototype.update=function(e){if(this.invis)if(this.hidden)t=new cc.Color(0,0,0),this.Color.node.color=t.fromHEX(this.chameleon);else{var t=new cc.Color(0,0,0);this.Color.node.color=t}this.node.y<=-400&&(this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).emitterMode=1,this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).emissionRate=100,this.loser()),this.camera_track(),this.node.x+=250*this.dir*e,1==this.fly_state?(this.node.x-=.4*this.prev_dir,this.fly_state=-1):this.stick&&(this.node.x+=.4*this.prev_dir,this.stick=!1),this.node.scaleX=this.dir>=0?1:-1;var o=this.getComponent(cc.RigidBody).linearVelocity.y;0!=this.dir||o>10?this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).emissionRate=100:this.node.getChildByName("sparkle").getComponent(cc.ParticleSystem).emissionRate=0,o>10&&1==this.dir?this.spin_right():o>10&&-1==this.dir?this.spin_left():0!=this.node.angle&&(this.node.angle=0),this.score=Math.round(this.node.x/35)>this.score?Math.round(this.node.x/35):this.score,this.Score.getComponent(cc.Label).string=this.score.toString()},t.prototype.spin_right=function(){this.node.angle-=12},t.prototype.spin_left=function(){this.node.angle+=12},t.prototype.camera_track=function(){this.fly_state&&!this.dir||(this.node.x<100?this.camera.x=0:this.camera.x=this.node.x-100)},t.prototype.onKeyDown=function(e){var t=this;if(e.keyCode==cc.macro.KEY.space&&this.on_floor&&this.jump(),e.keyCode==cc.macro.KEY.left?(this.dir=-1,this.prev_dir=this.dir):e.keyCode==cc.macro.KEY.right&&(this.dir=1,this.prev_dir=this.dir),e.keyCode==cc.macro.KEY.r&&this.powerup){var o=this.Color.node.color;this.invis=!0,this.powerup--,this.update_powerup(),this.scheduleOnce(function(){t.Color.node.color=o,t.invis=!1},5)}e.keyCode==cc.macro.KEY.p&&(this.paused?(this.paused=!1,cc.audioEngine.resumeAll(),cc.director.resume()):(this.paused=!0,cc.audioEngine.pauseAll(),cc.director.pause()))},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.left:case cc.macro.KEY.right:this.dir=0}},t.prototype.jump=function(){cc.audioEngine.playEffect(this.player_jump,!1),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,600),this.fly_state=1,this.debug_mode||(this.on_floor=!1)},t.prototype.update_coin=function(){this.coin_point.getComponent(cc.Label).string=this.coin.toString()},t.prototype.update_powerup=function(){this.bubble_powerup.getComponent(cc.Label).string=this.powerup.toString()},i([a(cc.Node)],t.prototype,"camera",void 0),i([a(cc.Node)],t.prototype,"maplist",void 0),i([a(cc.Prefab)],t.prototype,"sec0",void 0),i([a(cc.Prefab)],t.prototype,"sec1",void 0),i([a(cc.Prefab)],t.prototype,"sec2",void 0),i([a(cc.Prefab)],t.prototype,"sec3",void 0),i([a(cc.Prefab)],t.prototype,"sec4",void 0),i([a(cc.Prefab)],t.prototype,"sec5",void 0),i([a(cc.Prefab)],t.prototype,"sec6",void 0),i([a(cc.Prefab)],t.prototype,"sec7",void 0),i([a(cc.Prefab)],t.prototype,"sec8",void 0),i([a(cc.Prefab)],t.prototype,"sec9",void 0),i([a(cc.Prefab)],t.prototype,"sec10",void 0),i([a(cc.Prefab)],t.prototype,"sec11",void 0),i([a(cc.Prefab)],t.prototype,"sec12",void 0),i([a(cc.Prefab)],t.prototype,"sec13",void 0),i([a(cc.Prefab)],t.prototype,"sec14",void 0),i([a(cc.Prefab)],t.prototype,"sec15",void 0),i([a(cc.Prefab)],t.prototype,"sec16",void 0),i([a(cc.Prefab)],t.prototype,"sec17",void 0),i([a(cc.Prefab)],t.prototype,"sec18",void 0),i([a(cc.Prefab)],t.prototype,"sec19",void 0),i([a(cc.Prefab)],t.prototype,"sec20",void 0),i([a(cc.Node)],t.prototype,"Score",void 0),i([a(cc.Sprite)],t.prototype,"Color",void 0),i([a(cc.Node)],t.prototype,"coin_point",void 0),i([a(cc.Node)],t.prototype,"bubble_powerup",void 0),i([a(cc.AudioClip)],t.prototype,"player_jump",void 0),i([a(cc.AudioClip)],t.prototype,"get_coin",void 0),i([a(cc.AudioClip)],t.prototype,"die_audio",void 0),i([a(cc.AudioClip)],t.prototype,"sharp_knife",void 0),i([a(cc.AudioClip)],t.prototype,"get_powerup_bubble",void 0),i([a(cc.AudioClip)],t.prototype,"shooted",void 0),i([a(cc.AudioClip)],t.prototype,"night_back_music",void 0),i([s],t)}(cc.Component);o.Player=l,cc._RF.pop()},{}],root:[function(e,t,o){"use strict";cc._RF.push(t,"1eb0eVa2iJO2qXjaMqeJlJR","root");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.root=void 0;var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.color_strip=0,t}return n(t,e),t.prototype.onLoad=function(){this.color_strip=cc.sys.localStorage.getItem("nowcolor"),console.log("using strip "+this.color_strip)},t.prototype.start=function(){var e=[0,30,30,60,0,30];cc.director.setClearColor(cc.color(e[this.color_strip],e[this.color_strip],e[this.color_strip]))},i([s],t)}(cc.Component));o.root=a,cc._RF.pop()},{}],rule:[function(e,t,o){"use strict";cc._RF.push(t,"a9ac5BmMLxLho8t58liW+df","rule");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onload=function(){cc.debug.setDisplayStats(!1)},t.prototype.start=function(){cc.debug.setDisplayStats(!1);var e=new cc.Component.EventHandler;e.target=this.node,e.component="rule",e.handler="loadback",cc.find("Canvas/back").getComponent(cc.Button).clickEvents.push(e);var t=new cc.Component.EventHandler;t.target=this.node,t.component="rule",t.handler="loadnext",cc.find("Canvas/next").getComponent(cc.Button).clickEvents.push(t)},t.prototype.loadback=function(){cc.find("Canvas/game_rule_1").active?cc.director.loadScene("menu"):cc.find("Canvas/game_rule_2").active?cc.find("Canvas/game_rule_1").active=!0:cc.find("Canvas/game_rule_3").active?cc.find("Canvas/game_rule_2").active=!0:cc.find("Canvas/game_rule_4").active&&(cc.find("Canvas/game_rule_3").active=!0,cc.find("Canvas/next").active=!0)},t.prototype.loadnext=function(){cc.find("Canvas/game_rule_1").active?cc.find("Canvas/game_rule_1").active=!1:cc.find("Canvas/game_rule_2").active?cc.find("Canvas/game_rule_2").active=!1:cc.find("Canvas/game_rule_3").active&&(cc.find("Canvas/game_rule_3").active=!1,cc.find("Canvas/next").active=!1)},i([s],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],searchlight:[function(e,t,o){"use strict";cc._RF.push(t,"624693b42NGNrmPyczxPfy+","searchlight");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.searchlight=void 0;var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.searchlight_speed=70,t.range=50,t.spark=null,t.character=null,t.eye_pos=null,t.lightbeam=null,t.beambottom=null,t.dir=1,t.leftbound=0,t.rightbound=0,t.lockon=!1,t.physicManager=null,t}return n(t,e),t.prototype.onLoad=function(){this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.character=cc.find("Canvas/root/player")},t.prototype.start=function(){console.log("enemy init with range: "+this.range+"  at "+this.node.x,this.node.y),this.leftbound=this.node.x-this.range,this.rightbound=this.node.x+this.range},t.prototype.update=function(e){if(0==this.lightbeam.getComponent("light").alert_level)this.lockon=!1,console.log("no target"),this.node.x+=this.searchlight_speed*e*this.dir,this.lightbeam.x=this.node.x,this.lightbeam.angle+=.2*this.dir*this.range/50,this.node.x<=this.leftbound?this.dir=1:this.node.x>=this.rightbound&&(this.dir=-1),this.lightbeam.angle>30&&(this.lightbeam.angle=30),this.lightbeam.angle<-30&&(this.lightbeam.angle=-30);else{console.log("tracking");var t=0;this.beambottom.x>this.character.x&&this.node.x<this.character.x?t=-1:this.beambottom.x<this.character.x&&this.node.x>this.character.x?t=1:this.beambottom.x<this.character.x&&this.node.x<this.character.x?t=1:this.beambottom.x>this.character.x&&this.node.x>this.character.x&&(t=-1),this.node.x+=3*this.searchlight_speed*e*t,this.lightbeam.x=this.node.x,console.log("player movement [dir, prev_dir]: "+this.character.getComponent("player").dir,this.character.getComponent("player").prev_dir),this.lightbeam.angle+=5*e*t}this.eye_pos.angle=this.lightbeam.angle},i([a()],t.prototype,"range",void 0),i([a(cc.ParticleSystem)],t.prototype,"spark",void 0),i([a(cc.Node)],t.prototype,"eye_pos",void 0),i([a(cc.Node)],t.prototype,"lightbeam",void 0),i([a(cc.Node)],t.prototype,"beambottom",void 0),i([s],t)}(cc.Component);o.searchlight=l,cc._RF.pop()},{}],section_init:[function(e,t,o){"use strict";cc._RF.push(t,"f86b16xEJNGGqnIRrMSrSna","section_init");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Section=void 0;var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.base=6,t.strip=1,t.player_col=0,t.searchlight=null,t.sharp=null,t.sharp_down=null,t.spider=null,t.coin_pre=null,t.lego_pre=null,t.bubble_pre=null,t.banana_pre=null,t.data_pre=null,t.signal_pre=null,t.mute_pre=null,t.lv=0,t}return n(t,e),t.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDrawBoundingBox=!0,cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-500),this.lv=parseInt(this.node.name.replace("section",""))},t.prototype.onDestroy=function(){cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDebugDraw=!1,cc.director.getCollisionManager().enabledDrawBoundingBox=!1},t.prototype.start=function(){var e=this;this.node.anchorX=0,this.node.anchorY=0;var t=this.node.getComponent(cc.TiledMap);this.strip=cc.find("Canvas/root").getComponent("root").color_strip,this.base=1+6*this.strip,(s=this.node.addComponent(cc.RigidBody)).type=cc.RigidBodyType.Static,s.fixedRotation=!0,(a=this.node.addComponent(cc.PhysicsBoxCollider)).offset=cc.v2(960,240),a.size=cc.size(5,1e3),a.sensor=!0,a.tag=1e3,a.apply();for(var o=t.getTileSize(),c=t.getLayer("ground"),n=c.getLayerSize(),i=0;i<n.width;i++)for(var r=0;r<n.height;r++){var s,a;1==(l=c.getTiledTileAt(i,r,!0)).gid&&(l.gid=this.base,l.node.group="ground",(s=l.node.addComponent(cc.RigidBody)).type=cc.RigidBodyType.Static,s.fixedRotation=!0,(a=l.node.addComponent(cc.PhysicsBoxCollider)).offset=cc.v2(o.width/2,o.height/2),c.getTiledTileAt(i,r-1,!0).gid?a.size=cc.size(47.6,48):a.size=o,a.apply())}for((l=c.getTiledTileAt(n.width-1,7,!0)).gid&&(l.node.group="mound"),i=1;i<n.width-1;i++)for(r=0;r<n.height-1;r++){var l;0!=(l=c.getTiledTileAt(i,r,!0)).gid&&(0==c.getTiledTileAt(i+1,r,!0).gid&&0!=c.getTiledTileAt(i+1,r+1,!0).gid||0==c.getTiledTileAt(i-1,r,!0).gid&&0!=c.getTiledTileAt(i-1,r+1,!0).gid)&&(l.node.group="mound")}var p,d=t.getObjectGroup("colors").getObjects();"test"==cc.director.getScene().name||"multi"==cc.director.getScene().name?this.player_col=6*this.strip+cc.find("Canvas/root/player").getComponent("multi"==cc.director.getScene().name?"player_multi":"player").color:"day"==cc.director.getScene().name&&(this.player_col=6*this.strip+cc.find("Canvas/root/player").getComponent("player_day").color),d.forEach(function(t){var o,n=t.width/48,s=t.height/48;for(o=Math.floor(2*Math.random())?e.base+Math.floor(5*Math.random()):e.player_col,i=t.x/48;i<t.x/48+n;i++)for(r=10-t.y/48;r<10-t.y/48+s;r++)c.getTiledTileAt(i,r,!0).gid=o}),"test"==cc.director.getScene().name||"multi"==cc.director.getScene().name?p=cc.find("Canvas/root/player").getComponent("multi"==cc.director.getScene().name?"player_multi":"player").section_count:"day"==cc.director.getScene().name&&(p=cc.find("Canvas/root/player").getComponent("player_day").section_count);var h={1:"sharp",2:"sharp2",3:"sharp3",4:"sharp4"},u={1:"sharp_d",2:"sharp_d2",3:"sharp_d3"},f=t.getLayer("enemy"),y=f.getLayerSize(),g=new Array(y.width);for(i=0;i<y.width;i++)g[i]=new Array(y.height);var _=new Array(y.width);for(i=0;i<y.width;i++)_[i]=new Array(y.height);for(i=0;i<y.width;i++)for(r=0;r<y.height;r++)if(939==(j=f.getTiledTileAt(i,r,!0)).gid&&null==g[i][r]){g[i][r]=1;var m=1+Math.floor(4*Math.random()),v=cc.instantiate(this.sharp);v.name=h[m],v.x=1920*p+j.node.x,v.y=j.node.y,cc.find("Canvas/root/mapworld/sharp").addChild(v);for(var b=i+1;939==(O=f.getTiledTileAt(b,r,!0)).gid;b++){g[b][r]=1;var C=cc.instantiate(this.sharp);C.name=h[m],C.x=1920*p+O.node.x,C.y=O.node.y,cc.find("Canvas/root/mapworld/sharp").addChild(C)}}else if(326==j.gid){var w=cc.instantiate(this.spider);w.x=1920*p+j.node.x,w.y=j.node.y,cc.find("Canvas/root/mapworld").addChild(w)}else if(725==j.gid&&null==_[i][r]){_[i][r]=1,m=1+Math.floor(3*Math.random());var S=cc.instantiate(this.sharp_down);for(S.name=u[m],S.x=1920*p+j.node.x,S.y=j.node.y,cc.find("Canvas/root/mapworld/sharp_down").addChild(S),b=i+1;;b++){var O;if(725!=(O=f.getTiledTileAt(b,r,!0)).gid)break;_[b][r]=1;var P=cc.instantiate(this.sharp_down);P.name=u[m],P.x=1920*p+O.node.x,P.y=O.node.y,cc.find("Canvas/root/mapworld/sharp_down").addChild(P)}}f.enabled=!1;var E=this.node.getComponent(cc.TiledMap).getLayer("coin_and_bubble");for(y=E.getLayerSize(),i=0;i<y.width;i++)for(r=0;r<y.height;r++){var j;if(329==(j=E.getTiledTileAt(i,r,!0)).gid){var k=cc.instantiate(this.coin_pre);k.x=1920*p+j.node.x,k.y=j.node.y,cc.find("Canvas/root/mapworld/coin_bubble").addChild(k),j.gid=0}else if(286==j.gid)if(j.gid=0,"day"==cc.director.getScene().name){m=1+Math.floor(2*Math.random());var x=new cc.Node;1==m?x=cc.instantiate(this.banana_pre):2==m&&(x=cc.instantiate(this.lego_pre)),x.x=1920*p+j.node.x,x.y=j.node.y,cc.find("Canvas/root/mapworld/coin_bubble").addChild(x)}else"multi"==cc.director.getScene().name?(m=1+Math.floor(4*Math.random()),x=new cc.Node,1==m?x=cc.instantiate(this.bubble_pre):2==m?x=cc.instantiate(this.data_pre):2==m?x=cc.instantiate(this.signal_pre):2==m&&(x=cc.instantiate(this.mute_pre)),x.x=1920*p+j.node.x,x.y=j.node.y,cc.find("Canvas/root/mapworld/coin_bubble").addChild(x)):((x=cc.instantiate(this.bubble_pre)).x=1920*p+j.node.x,x.y=j.node.y,cc.find("Canvas/root/mapworld/coin_bubble").addChild(x))}E.enabled=!1;var M=p;if(M&&"day"!=cc.director.getScene().name){var R=[360,300,300,250,200,150,120,100],I=0;I=M>=12?3:M>=6?2+Math.floor(Math.random()*(M-6))?1:0:M>=2?1+Math.floor(Math.random()*(M-2))?1:0:Math.floor(2*Math.random()),Math.floor(2*Math.random())&&I++;var B=1920*M+(0==M?400:0);for(i=0;i<I;i++){var A=R[2*(I-1)+Math.floor(2*Math.random())],L=cc.instantiate(this.searchlight);L.getComponent("enemy_wrapper")&&(L.getComponent("enemy_wrapper").range=A),L.setPosition(B+1920/(I+1)*i+(Math.floor(400*Math.random())-200),200),cc.find("Canvas/root/enemy_collection").addChild(L)}}},i([a(cc.Prefab)],t.prototype,"searchlight",void 0),i([a(cc.Prefab)],t.prototype,"sharp",void 0),i([a(cc.Prefab)],t.prototype,"sharp_down",void 0),i([a(cc.Prefab)],t.prototype,"spider",void 0),i([a(cc.Prefab)],t.prototype,"coin_pre",void 0),i([a(cc.Prefab)],t.prototype,"lego_pre",void 0),i([a(cc.Prefab)],t.prototype,"bubble_pre",void 0),i([a(cc.Prefab)],t.prototype,"banana_pre",void 0),i([a(cc.Prefab)],t.prototype,"data_pre",void 0),i([a(cc.Prefab)],t.prototype,"signal_pre",void 0),i([a(cc.Prefab)],t.prototype,"mute_pre",void 0),i([s],t)}(cc.Component);o.Section=l,cc._RF.pop()},{}],sharp_down:[function(e,t,o){"use strict";cc._RF.push(t,"7d26fZxbw1NSItYzpbTZZ6m","sharp_down");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.sharp_down=void 0;var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0},t.prototype.start=function(){var e=this,t=cc.repeatForever(cc.sequence(cc.moveBy(.2,cc.v2(0,-210)),cc.delayTime(.1),cc.moveBy(0,cc.v2(0,210)),cc.delayTime(1.2)));"sharp_d"==this.node.name?this.scheduleOnce(function(){e.node.runAction(t)},1):"sharp_d2"==this.node.name?this.scheduleOnce(function(){e.node.runAction(t)},2):"sharp_d3"==this.node.name&&this.scheduleOnce(function(){e.node.runAction(t)},3)},i([s],t)}(cc.Component));o.sharp_down=a,cc._RF.pop()},{}],sharp:[function(e,t,o){"use strict";cc._RF.push(t,"c1779RvYYhKTLIdabDWRppQ","sharp");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.sharp=void 0;var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0},t.prototype.start=function(){if("sharp1"==this.node.name){var e=cc.repeatForever(cc.sequence(cc.moveBy(1,cc.v2(0,-48)),cc.delayTime(.5),cc.moveBy(1,cc.v2(0,48)),cc.delayTime(.5)));this.node.runAction(e)}else"sharp2"==this.node.name?(e=cc.repeatForever(cc.sequence(cc.moveBy(1,cc.v2(0,-48)),cc.delayTime(1),cc.moveBy(1,cc.v2(0,48)),cc.delayTime(1))),this.node.runAction(e)):"sharp3"==this.node.name?(e=cc.repeatForever(cc.sequence(cc.moveBy(1,cc.v2(0,-48)),cc.delayTime(1.5),cc.moveBy(1,cc.v2(0,48)),cc.delayTime(1.5))),this.node.runAction(e)):"sharp4"==this.node.name&&(e=cc.repeatForever(cc.sequence(cc.moveBy(1,cc.v2(0,-48)),cc.delayTime(2),cc.moveBy(1,cc.v2(0,48)),cc.delayTime(2))),this.node.runAction(e))},i([s],t)}(cc.Component));o.sharp=a,cc._RF.pop()},{}],spider:[function(e,t,o){"use strict";cc._RF.push(t,"9cb3fLVW15AforolOA9VO1/","spider");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.spider=void 0;var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveDir=1,t}return n(t,e),t.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0},t.prototype.start=function(){var e=this.getComponent(cc.RigidBody);console.log("V = ",e.linearVelocity)},t.prototype.update=function(e){this.node.x+=220*e*this.moveDir},t.prototype.onBeginContact=function(e,t,o){"mound"==o.node.group&&0==e.getWorldManifold().normal.y?this.moveDir*=-1:e.enabled=!1},i([s],t)}(cc.Component));o.spider=a,cc._RF.pop()},{}],start_scene:[function(e,t,o){"use strict";cc._RF.push(t,"73edcRU4k1F8JCNxOMYOUiu","start_scene");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onload=function(){cc.debug.setDisplayStats(!1),firebase.auth().currentUser.uid&&(this.uid=firebase.auth().currentUser.uid)},t.prototype.start=function(){cc.debug.setDisplayStats(!1),cc.find("Canvas/back").on(cc.Node.EventType.MOUSE_DOWN,function(){cc.director.loadScene("menu")},this),this.email_data="",this.password_data="",this.username="";var e=new cc.Component.EventHandler;e.target=this.node,e.component="start_scene",e.handler="loadsignin",cc.find("Canvas/SignIn").getComponent(cc.Button).clickEvents.push(e);var t=new cc.Component.EventHandler;t.target=this.node,t.component="start_scene",t.handler="loadsignup",cc.find("Canvas/SignUp").getComponent(cc.Button).clickEvents.push(t)},t.prototype.loadsignin=function(){var e=this;this.password_data=cc.find("Canvas/Password").getComponent(cc.EditBox).string,this.email_data=cc.find("Canvas/Email").getComponent(cc.EditBox).string,firebase.auth().signInWithEmailAndPassword(this.email_data,this.password_data).then(function(){e.password_data="",e.email_data="",cc.director.loadScene("menu")}).catch(function(e){alert(e)})},t.prototype.loadsignup=function(){var e=this;this.username=cc.find("Canvas/Name").getComponent(cc.EditBox).string,this.password_data=cc.find("Canvas/Password").getComponent(cc.EditBox).string,this.email_data=cc.find("Canvas/Email").getComponent(cc.EditBox).string,console.log("name = ",this.username),""!=this.username?firebase.auth().createUserWithEmailAndPassword(this.email_data,this.password_data).then(function(t){var o={coins:0};o.email=e.email_data,o.highscore=0,o.name=e.username,console.log("name = ",e.username,e.email_data),o.thing={lego:0,banana:0,color:{1:!0,2:!1,3:!1,4:!1,5:!1},powerup:0,signal:0,mute:0},firebase.database().ref("/users/"+t.user.uid).set(o,function(){e.loadsignin()})}).catch(function(e){alert(e)}):alert("Username cannot be empty.")},i([s],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],store:[function(e,t,o){"use strict";cc._RF.push(t,"63accuI0aRFm5VF25/+YBYC","store");var c,n=this&&this.__extends||(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,c){var n,i=arguments.length,r=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,c);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,o,r):n(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.money=0,t.lego=0,t.banana=0,t.powerup=0,t.mute=0,t.signal=0,t.color={1:!0,2:!1,3:!1,4:!1,5:!1},t.nowcolor=1,t.uid=null,t}return n(t,e),t.prototype.start=function(){var e=this;cc.debug.setDisplayStats(!1),this.uid=cc.sys.localStorage.getItem("uid"),this.money=cc.sys.localStorage.getItem("coins"),this.lego=cc.sys.localStorage.getItem("lego"),this.powerup=cc.sys.localStorage.getItem("powerup"),this.banana=cc.sys.localStorage.getItem("banana"),this.mute=cc.sys.localStorage.getItem("mute"),this.signal=cc.sys.localStorage.getItem("signal"),this.nowcolor=cc.sys.localStorage.getItem("nowcolor");for(var t=cc.sys.localStorage.getItem("color").split(""),o=1;o<=5;o++)parseInt(t[o])?this.color[o]=!0:this.color[o]=!1;var c=this.money;for(cc.find("Canvas/coins").getComponent(cc.Label).string=c.toString(),c=this.lego,cc.find("Canvas/lego/amount").getComponent(cc.Label).string=c.toString(),c=this.banana,cc.find("Canvas/banana/amount").getComponent(cc.Label).string=c.toString(),c=this.powerup,cc.find("Canvas/powerup/amount").getComponent(cc.Label).string=c.toString(),c=this.mute,cc.find("Canvas/mute/amount").getComponent(cc.Label).string=c.toString(),c=this.signal,cc.find("Canvas/signal/amount").getComponent(cc.Label).string=c.toString(),1==this.nowcolor?cc.find("Canvas/color1/check").active=!0:2==this.nowcolor?cc.find("Canvas/color2/check").active=!0:3==this.nowcolor?cc.find("Canvas/color3/check").active=!0:4==this.nowcolor?cc.find("Canvas/color4/check").active=!0:5==this.nowcolor&&(cc.find("Canvas/color5/check").active=!0),o=1;o<=5;o++)this.color[o]&&(cc.find("Canvas/color"+o.toString()+"/price").getComponent(cc.Label).string="free");var n=new cc.Component.EventHandler;n.target=this.node,n.component="store",n.handler="loadlego",cc.find("Canvas/lego/button").getComponent(cc.Button).clickEvents.push(n);var i=new cc.Component.EventHandler;i.target=this.node,i.component="store",i.handler="loadbanana",cc.find("Canvas/banana/button").getComponent(cc.Button).clickEvents.push(i);var r=new cc.Component.EventHandler;r.target=this.node,r.component="store",r.handler="loadpowerup",cc.find("Canvas/powerup/button").getComponent(cc.Button).clickEvents.push(r);var s=new cc.Component.EventHandler;s.target=this.node,s.component="store",s.handler="loadmute",cc.find("Canvas/mute/button").getComponent(cc.Button).clickEvents.push(s);var a=new cc.Component.EventHandler;a.target=this.node,a.component="store",a.handler="loadsignal",cc.find("Canvas/signal/button").getComponent(cc.Button).clickEvents.push(a);var l=new cc.Component.EventHandler;l.target=this.node,l.component="store",l.handler="loadcolor1",cc.find("Canvas/color1").getComponent(cc.Button).clickEvents.push(l);var p=new cc.Component.EventHandler;p.target=this.node,p.component="store",p.handler="loadcolor2",cc.find("Canvas/color2").getComponent(cc.Button).clickEvents.push(p);var d=new cc.Component.EventHandler;d.target=this.node,d.component="store",d.handler="loadcolor3",cc.find("Canvas/color3").getComponent(cc.Button).clickEvents.push(d);var h=new cc.Component.EventHandler;h.target=this.node,h.component="store",h.handler="loadcolor4",cc.find("Canvas/color4").getComponent(cc.Button).clickEvents.push(h);var u=new cc.Component.EventHandler;u.target=this.node,u.component="store",u.handler="loadcolor5",cc.find("Canvas/color5").getComponent(cc.Button).clickEvents.push(u),cc.find("Canvas/SignOut").on(cc.Node.EventType.MOUSE_DOWN,function(){e.loadSignout()},this)},t.prototype.loadpowerup=function(){if(this.money>=60){this.money-=60,this.powerup++,firebase.database().ref("/users/"+this.uid+"/coins").set(this.money),firebase.database().ref("/users/"+this.uid+"/thing/powerup").set(this.powerup);var e=this.powerup;cc.find("Canvas/powerup/amount").getComponent(cc.Label).string=e.toString(),e=this.money,cc.find("Canvas/coins").getComponent(cc.Label).string=e.toString()}},t.prototype.loadmute=function(){if(this.money>=70){this.money-=70,this.mute++,firebase.database().ref("/users/"+this.uid+"/coins").set(this.money),firebase.database().ref("/users/"+this.uid+"/thing/mute").set(this.mute);var e=this.mute;cc.find("Canvas/mute/amount").getComponent(cc.Label).string=e.toString(),e=this.money,cc.find("Canvas/coins").getComponent(cc.Label).string=e.toString()}},t.prototype.loadsignal=function(){if(this.money>=70){this.money-=70,this.signal++,firebase.database().ref("/users/"+this.uid+"/coins").set(this.money),firebase.database().ref("/users/"+this.uid+"/thing/signal").set(this.signal);var e=this.signal;cc.find("Canvas/signal/amount").getComponent(cc.Label).string=e.toString(),e=this.money,cc.find("Canvas/coins").getComponent(cc.Label).string=e.toString()}},t.prototype.loadlego=function(){if(this.money>=50){this.money-=50,this.lego++,firebase.database().ref("/users/"+this.uid+"/coins").set(this.money),firebase.database().ref("/users/"+this.uid+"/thing/lego").set(this.lego);var e=this.lego;cc.find("Canvas/lego/amount").getComponent(cc.Label).string=e.toString(),e=this.money,cc.find("Canvas/coins").getComponent(cc.Label).string=e.toString()}},t.prototype.loadbanana=function(){if(this.money>=80){this.money-=80,this.banana++,console.log(this.banana),firebase.database().ref("/users/"+this.uid+"/coins").set(this.money),firebase.database().ref("/users/"+this.uid+"/thing/banana").set(this.banana);var e=this.banana;cc.find("Canvas/banana/amount").getComponent(cc.Label).string=e.toString(),e=this.money,cc.find("Canvas/coins").getComponent(cc.Label).string=e.toString()}},t.prototype.loadcolor1=function(){this.money>=0&&0==this.color[1]?(this.money-=0,this.color[1]=!0,this.nowcolor=1,firebase.database().ref("/users/"+this.uid+"/coins").set(this.money),firebase.database().ref("/users/"+this.uid+"/thing/color").set(this.color),cc.find("Canvas/coins").getComponent(cc.Label).string=this.money.toString(),cc.find("Canvas/color1/price").getComponent(cc.Label).string="free",cc.find("Canvas/color1/check").active=!0,cc.find("Canvas/color2/check").active=!1,cc.find("Canvas/color3/check").active=!1,cc.find("Canvas/color4/check").active=!1,cc.find("Canvas/color5/check").active=!1):1==this.color[1]&&(this.nowcolor=1,cc.find("Canvas/color1/check").active=!0,cc.find("Canvas/color2/check").active=!1,cc.find("Canvas/color3/check").active=!1,cc.find("Canvas/color4/check").active=!1,cc.find("Canvas/color5/check").active=!1)},t.prototype.loadcolor2=function(){this.money>=150&&0==this.color[2]?(this.money-=150,this.color[2]=!0,this.nowcolor=2,firebase.database().ref("/users/"+this.uid+"/coins").set(this.money),firebase.database().ref("/users/"+this.uid+"/thing/color").set(this.color),cc.find("Canvas/coins").getComponent(cc.Label).string=this.money.toString(),cc.find("Canvas/color2/price").getComponent(cc.Label).string="free",cc.find("Canvas/color2/check").active=!0,cc.find("Canvas/color1/check").active=!1,cc.find("Canvas/color3/check").active=!1,cc.find("Canvas/color4/check").active=!1,cc.find("Canvas/color5/check").active=!1):1==this.color[2]&&(this.nowcolor=2,cc.find("Canvas/color2/check").active=!0,cc.find("Canvas/color1/check").active=!1,cc.find("Canvas/color3/check").active=!1,cc.find("Canvas/color4/check").active=!1,cc.find("Canvas/color5/check").active=!1)},t.prototype.loadcolor3=function(){this.money>=200&&0==this.color[3]?(this.money-=200,this.color[3]=!0,this.nowcolor=3,firebase.database().ref("/users/"+this.uid+"/coins").set(this.money),firebase.database().ref("/users/"+this.uid+"/thing/color").set(this.color),cc.find("Canvas/coins").getComponent(cc.Label).string=this.money.toString(),cc.find("Canvas/color3/price").getComponent(cc.Label).string="free",cc.find("Canvas/color3/check").active=!0,cc.find("Canvas/color1/check").active=!1,cc.find("Canvas/color2/check").active=!1,cc.find("Canvas/color4/check").active=!1,cc.find("Canvas/color5/check").active=!1):1==this.color[3]&&(this.nowcolor=3,cc.find("Canvas/color3/check").active=!0,cc.find("Canvas/color1/check").active=!1,cc.find("Canvas/color2/check").active=!1,cc.find("Canvas/color4/check").active=!1,cc.find("Canvas/color5/check").active=!1)},t.prototype.loadcolor4=function(){this.money>=250&&0==this.color[4]?(this.money-=250,this.color[4]=!0,this.nowcolor=4,firebase.database().ref("/users/"+this.uid+"/coins").set(this.money),firebase.database().ref("/users/"+this.uid+"/thing/color").set(this.color),cc.find("Canvas/coins").getComponent(cc.Label).string=this.money.toString(),cc.find("Canvas/color4/price").getComponent(cc.Label).string="free",cc.find("Canvas/color4/check").active=!0,cc.find("Canvas/color1/check").active=!1,cc.find("Canvas/color2/check").active=!1,cc.find("Canvas/color3/check").active=!1,cc.find("Canvas/color5/check").active=!1):1==this.color[4]&&(this.nowcolor=4,cc.find("Canvas/color4/check").active=!0,cc.find("Canvas/color1/check").active=!1,cc.find("Canvas/color2/check").active=!1,cc.find("Canvas/color3/check").active=!1,cc.find("Canvas/color5/check").active=!1)},t.prototype.loadcolor5=function(){this.money>=500&&0==this.color[5]?(this.money-=500,this.color[5]=!0,this.nowcolor=5,firebase.database().ref("/users/"+this.uid+"/coins").set(this.money),firebase.database().ref("/users/"+this.uid+"/thing/color").set(this.color),cc.find("Canvas/coins").getComponent(cc.Label).string=this.money.toString(),cc.find("Canvas/color5/price").getComponent(cc.Label).string="free",cc.find("Canvas/color5/check").active=!0,cc.find("Canvas/color1/check").active=!1,cc.find("Canvas/color2/check").active=!1,cc.find("Canvas/color3/check").active=!1,cc.find("Canvas/color4/check").active=!1):1==this.color[5]&&(this.nowcolor=5,cc.find("Canvas/color5/check").active=!0,cc.find("Canvas/color1/check").active=!1,cc.find("Canvas/color3/check").active=!1,cc.find("Canvas/color4/check").active=!1,cc.find("Canvas/color2/check").active=!1)},t.prototype.loadSignout=function(){console.log("back"),cc.sys.localStorage.setItem("coins",this.money),cc.sys.localStorage.setItem("lego",this.lego),cc.sys.localStorage.setItem("powerup",this.powerup),cc.sys.localStorage.setItem("banana",this.banana),cc.sys.localStorage.setItem("mute",this.mute),cc.sys.localStorage.setItem("signal",this.signal),cc.sys.localStorage.setItem("nowcolor",this.nowcolor),console.log(cc.sys.localStorage.getItem("nowcolor")),this.scheduleOnce(function(){cc.director.loadScene("menu")},.5)},i([s],t)}(cc.Component));o.default=a,cc._RF.pop()},{}]},{},["arm","bird_map_init","bird_player","bubble_item","bubble_item_in_dayscene","bubble_item_in_multi","enemy moving sharp","enemy_wrapper","leader","light","loadgame","lose","lose_canvas","menu","missile","multi_res_lose","multi_res_win","pair_game","parent","player","player_day","player_multi","root","rule","searchlight","section_init","sharp","sharp_down","spider","start_scene","store"]);